<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MybatisåŸºæœ¬ä½¿ç”¨ | ç„¦ç³–å’–å•¡</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/blog/img/favicon.ico">
    <meta name="description" content="å†™ç‚¹ä¸œè¥¿">
    <meta name="keywords" content="å†™ç‚¹ä¸œè¥¿">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/blog/assets/css/0.styles.6741cb35.css" as="style"><link rel="preload" href="/blog/assets/js/app.c1e4a00a.js" as="script"><link rel="preload" href="/blog/assets/js/2.5f0b0e2a.js" as="script"><link rel="preload" href="/blog/assets/js/14.96fb6837.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.1ff019fd.js"><link rel="prefetch" href="/blog/assets/js/11.9b8763b0.js"><link rel="prefetch" href="/blog/assets/js/12.88efa3c6.js"><link rel="prefetch" href="/blog/assets/js/13.4445e796.js"><link rel="prefetch" href="/blog/assets/js/15.9412e9e7.js"><link rel="prefetch" href="/blog/assets/js/16.b0253bbd.js"><link rel="prefetch" href="/blog/assets/js/17.985e1d5d.js"><link rel="prefetch" href="/blog/assets/js/18.8c534ba9.js"><link rel="prefetch" href="/blog/assets/js/19.bd239341.js"><link rel="prefetch" href="/blog/assets/js/20.7a720d44.js"><link rel="prefetch" href="/blog/assets/js/21.933c269f.js"><link rel="prefetch" href="/blog/assets/js/22.6ec859a0.js"><link rel="prefetch" href="/blog/assets/js/23.689177cd.js"><link rel="prefetch" href="/blog/assets/js/24.09f05d6d.js"><link rel="prefetch" href="/blog/assets/js/25.2e18a163.js"><link rel="prefetch" href="/blog/assets/js/26.2ebd1cb9.js"><link rel="prefetch" href="/blog/assets/js/27.ae3e65f6.js"><link rel="prefetch" href="/blog/assets/js/28.c1030bc2.js"><link rel="prefetch" href="/blog/assets/js/29.e71676b1.js"><link rel="prefetch" href="/blog/assets/js/3.c2f4e059.js"><link rel="prefetch" href="/blog/assets/js/30.abb0e748.js"><link rel="prefetch" href="/blog/assets/js/31.e393706f.js"><link rel="prefetch" href="/blog/assets/js/32.0a853967.js"><link rel="prefetch" href="/blog/assets/js/33.e89f3bde.js"><link rel="prefetch" href="/blog/assets/js/34.5432c72f.js"><link rel="prefetch" href="/blog/assets/js/35.fa68bc18.js"><link rel="prefetch" href="/blog/assets/js/36.f6d552f1.js"><link rel="prefetch" href="/blog/assets/js/37.e7d5df09.js"><link rel="prefetch" href="/blog/assets/js/38.8189f055.js"><link rel="prefetch" href="/blog/assets/js/39.c609bc4a.js"><link rel="prefetch" href="/blog/assets/js/4.f535c559.js"><link rel="prefetch" href="/blog/assets/js/40.673ffdd7.js"><link rel="prefetch" href="/blog/assets/js/41.94b96a76.js"><link rel="prefetch" href="/blog/assets/js/42.4ca767bc.js"><link rel="prefetch" href="/blog/assets/js/43.0b333b90.js"><link rel="prefetch" href="/blog/assets/js/44.25370e46.js"><link rel="prefetch" href="/blog/assets/js/45.e81a0d85.js"><link rel="prefetch" href="/blog/assets/js/46.01452e3b.js"><link rel="prefetch" href="/blog/assets/js/47.33ec34ce.js"><link rel="prefetch" href="/blog/assets/js/48.29211830.js"><link rel="prefetch" href="/blog/assets/js/49.5f8ff440.js"><link rel="prefetch" href="/blog/assets/js/5.042b1c29.js"><link rel="prefetch" href="/blog/assets/js/50.88b1311f.js"><link rel="prefetch" href="/blog/assets/js/51.9c6e6eaa.js"><link rel="prefetch" href="/blog/assets/js/52.4ea78efd.js"><link rel="prefetch" href="/blog/assets/js/53.66033dab.js"><link rel="prefetch" href="/blog/assets/js/54.c8c11f7f.js"><link rel="prefetch" href="/blog/assets/js/55.5c03b9e4.js"><link rel="prefetch" href="/blog/assets/js/6.498128ba.js"><link rel="prefetch" href="/blog/assets/js/7.0a0d3507.js"><link rel="prefetch" href="/blog/assets/js/8.556faa90.js"><link rel="prefetch" href="/blog/assets/js/9.6696f1c8.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.6741cb35.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="ç›®å½•" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/img/caramel.svg" alt="ç„¦ç³–å’–å•¡" class="logo"> <span class="site-name can-hide">ç„¦ç³–å’–å•¡</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="â˜•ï¸ åç«¯" class="dropdown-title"><a href="/blog/backend/" class="link-title">â˜•ï¸ åç«¯</a> <span class="title" style="display:none;">â˜•ï¸ åç«¯</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/pages/4F77B035DFDB56B0/" aria-current="page" class="nav-link router-link-exact-active router-link-active">ğŸ¦ Mybatis</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/456/" class="nav-link">ğŸ€ Spring</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/7F29642A19662951/" class="nav-link">ğŸ”€ å¹¶å‘</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/33226E4C1DB2BCEA/" class="nav-link">ğŸ—’ æ—¥å¿—æŠ€æœ¯</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ§ Linux" class="dropdown-title"><a href="/blog/linux/" class="link-title">ğŸ§ Linux</a> <span class="title" style="display:none;">ğŸ§ Linux</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/pages/53E52BA23D40007F/" class="nav-link">ğŸ‡¨ğŸ‡³ Deepin</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/6541198C83D77024/" class="nav-link">ğŸ“ Raspberry</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/A841DC1F661EE868/" class="nav-link">ğŸ MacOS</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/BE53461A7CC6F17A/" class="nav-link">ğŸ¦Š aliyun</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ›¢ æ•°æ®åº“" class="dropdown-title"><a href="/blog/database/" class="link-title">ğŸ›¢ æ•°æ®åº“</a> <span class="title" style="display:none;">ğŸ›¢ æ•°æ®åº“</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/pages/8309a5b876fc95e3/" class="nav-link">ğŸ¬ MySQL</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ–¥ å‰ç«¯" class="dropdown-title"><a href="/blog/frontend/" class="link-title">ğŸ–¥ å‰ç«¯</a> <span class="title" style="display:none;">ğŸ–¥ å‰ç«¯</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/pages/9a7ee40fc232253e/" class="nav-link">æŠ€æœ¯æ–‡æ¡£</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/4c778760be26d8b3/" class="nav-link">GitHubæŠ€å·§</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/41f87d890d0a02af/" class="nav-link">åšå®¢æ­å»º</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ’Š å…¶ä»–" class="dropdown-title"><a href="/blog/other/" class="link-title">ğŸ’Š å…¶ä»–</a> <span class="title" style="display:none;">ğŸ’Š å…¶ä»–</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/pages/940bde/" class="nav-link">ğŸ”¢ ç®—æ³•</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/359857/" class="nav-link">â¿ æ•°æ®ç»“æ„</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ”¨ è¿ç»´" class="dropdown-title"><a href="/blog/operations/" class="link-title">ğŸ”¨ è¿ç»´</a> <span class="title" style="display:none;">ğŸ”¨ è¿ç»´</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/pages/D969411009A1E308/" class="nav-link">ğŸ‘´ Jenkins</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ” ä¸ªäºº" class="dropdown-title"><a href="/blog/personal/" class="link-title">ğŸ” ä¸ªäºº</a> <span class="title" style="display:none;">ğŸ” ä¸ªäºº</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/pages/7340A3E323A98AB0/" class="nav-link">ğŸ® Caramel</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="â­ï¸ æ”¶è—" class="dropdown-title"><a href="/blog/favorite/" class="link-title">â­ï¸ æ”¶è—</a> <span class="title" style="display:none;">â­ï¸ æ”¶è—</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/pages/beb6c0bd8a66cea6/" class="nav-link">ç½‘ç«™</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/eee83a9211a70f9d/" class="nav-link">èµ„æº</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/12df8ace52d493f6/" class="nav-link">Vueèµ„æº</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸš€ ç´¢å¼•" class="dropdown-title"><a href="/blog/index/" class="link-title">ğŸš€ ç´¢å¼•</a> <span class="title" style="display:none;">ğŸš€ ç´¢å¼•</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/categories/" class="nav-link">åˆ†ç±»</a></li><li class="dropdown-item"><!----> <a href="/blog/tags/" class="nav-link">æ ‡ç­¾</a></li><li class="dropdown-item"><!----> <a href="/blog/archives/" class="nav-link">å½’æ¡£</a></li></ul></div></div> <a href="https://github.com/Fitminf" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://fitminfpicgo.oss-cn-guangzhou.aliyuncs.com/picgo/202209221704957.jpeg"> <div class="blogger-info"><h3>Fitminf</h3> <span>é›¾é‡Œçœ‹èŠ±</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="â˜•ï¸ åç«¯" class="dropdown-title"><a href="/blog/backend/" class="link-title">â˜•ï¸ åç«¯</a> <span class="title" style="display:none;">â˜•ï¸ åç«¯</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/pages/4F77B035DFDB56B0/" aria-current="page" class="nav-link router-link-exact-active router-link-active">ğŸ¦ Mybatis</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/456/" class="nav-link">ğŸ€ Spring</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/7F29642A19662951/" class="nav-link">ğŸ”€ å¹¶å‘</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/33226E4C1DB2BCEA/" class="nav-link">ğŸ—’ æ—¥å¿—æŠ€æœ¯</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ§ Linux" class="dropdown-title"><a href="/blog/linux/" class="link-title">ğŸ§ Linux</a> <span class="title" style="display:none;">ğŸ§ Linux</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/pages/53E52BA23D40007F/" class="nav-link">ğŸ‡¨ğŸ‡³ Deepin</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/6541198C83D77024/" class="nav-link">ğŸ“ Raspberry</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/A841DC1F661EE868/" class="nav-link">ğŸ MacOS</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/BE53461A7CC6F17A/" class="nav-link">ğŸ¦Š aliyun</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ›¢ æ•°æ®åº“" class="dropdown-title"><a href="/blog/database/" class="link-title">ğŸ›¢ æ•°æ®åº“</a> <span class="title" style="display:none;">ğŸ›¢ æ•°æ®åº“</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/pages/8309a5b876fc95e3/" class="nav-link">ğŸ¬ MySQL</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ–¥ å‰ç«¯" class="dropdown-title"><a href="/blog/frontend/" class="link-title">ğŸ–¥ å‰ç«¯</a> <span class="title" style="display:none;">ğŸ–¥ å‰ç«¯</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/pages/9a7ee40fc232253e/" class="nav-link">æŠ€æœ¯æ–‡æ¡£</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/4c778760be26d8b3/" class="nav-link">GitHubæŠ€å·§</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/41f87d890d0a02af/" class="nav-link">åšå®¢æ­å»º</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ’Š å…¶ä»–" class="dropdown-title"><a href="/blog/other/" class="link-title">ğŸ’Š å…¶ä»–</a> <span class="title" style="display:none;">ğŸ’Š å…¶ä»–</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/pages/940bde/" class="nav-link">ğŸ”¢ ç®—æ³•</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/359857/" class="nav-link">â¿ æ•°æ®ç»“æ„</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ”¨ è¿ç»´" class="dropdown-title"><a href="/blog/operations/" class="link-title">ğŸ”¨ è¿ç»´</a> <span class="title" style="display:none;">ğŸ”¨ è¿ç»´</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/pages/D969411009A1E308/" class="nav-link">ğŸ‘´ Jenkins</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ” ä¸ªäºº" class="dropdown-title"><a href="/blog/personal/" class="link-title">ğŸ” ä¸ªäºº</a> <span class="title" style="display:none;">ğŸ” ä¸ªäºº</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/pages/7340A3E323A98AB0/" class="nav-link">ğŸ® Caramel</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="â­ï¸ æ”¶è—" class="dropdown-title"><a href="/blog/favorite/" class="link-title">â­ï¸ æ”¶è—</a> <span class="title" style="display:none;">â­ï¸ æ”¶è—</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/pages/beb6c0bd8a66cea6/" class="nav-link">ç½‘ç«™</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/eee83a9211a70f9d/" class="nav-link">èµ„æº</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/12df8ace52d493f6/" class="nav-link">Vueèµ„æº</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸš€ ç´¢å¼•" class="dropdown-title"><a href="/blog/index/" class="link-title">ğŸš€ ç´¢å¼•</a> <span class="title" style="display:none;">ğŸš€ ç´¢å¼•</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/categories/" class="nav-link">åˆ†ç±»</a></li><li class="dropdown-item"><!----> <a href="/blog/tags/" class="nav-link">æ ‡ç­¾</a></li><li class="dropdown-item"><!----> <a href="/blog/archives/" class="nav-link">å½’æ¡£</a></li></ul></div></div> <a href="https://github.com/Fitminf" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>MyBatis</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/pages/4F77B035DFDB56B0/" aria-current="page" class="active sidebar-link">MybatisåŸºæœ¬ä½¿ç”¨</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/blog/pages/4F77B035DFDB56B0/#æ ¸å¿ƒå¯¹è±¡" class="sidebar-link">æ ¸å¿ƒå¯¹è±¡</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/blog/pages/4F77B035DFDB56B0/#sqlsessionfactorybuilder" class="sidebar-link">SqlSessionFactoryBuilder</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/4F77B035DFDB56B0/#sqlsessionfactory" class="sidebar-link">SqlSessionFactory</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/4F77B035DFDB56B0/#sqlsession" class="sidebar-link">SqlSession</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/blog/pages/4F77B035DFDB56B0/#æ ¸å¿ƒé…ç½®" class="sidebar-link">æ ¸å¿ƒé…ç½®</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/blog/pages/4F77B035DFDB56B0/#properties" class="sidebar-link">properties</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/4F77B035DFDB56B0/#settings" class="sidebar-link">settings</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/4F77B035DFDB56B0/#typealiases" class="sidebar-link">typeAliases</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/4F77B035DFDB56B0/#environments" class="sidebar-link">environments</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/4F77B035DFDB56B0/#mappers" class="sidebar-link">mappers</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/blog/pages/4F77B035DFDB56B0/#sql-æ˜ å°„æ–‡ä»¶" class="sidebar-link">Sql æ˜ å°„æ–‡ä»¶</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/blog/pages/4F77B035DFDB56B0/#mapper" class="sidebar-link">mapper</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/4F77B035DFDB56B0/#select" class="sidebar-link">select</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/4F77B035DFDB56B0/#insert" class="sidebar-link">insert</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/4F77B035DFDB56B0/#update" class="sidebar-link">update</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/4F77B035DFDB56B0/#delete" class="sidebar-link">delete</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/4F77B035DFDB56B0/#å ä½ç¬¦" class="sidebar-link">å ä½ç¬¦</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/4F77B035DFDB56B0/#param-æ³¨è§£" class="sidebar-link">@param æ³¨è§£</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/blog/pages/4F77B035DFDB56B0/#è¾“å…¥è¾“å‡ºæ˜ å°„" class="sidebar-link">è¾“å…¥è¾“å‡ºæ˜ å°„</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/blog/pages/4F77B035DFDB56B0/#parametertype-è¾“å…¥æ˜ å°„" class="sidebar-link">parameterType è¾“å…¥æ˜ å°„</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/4F77B035DFDB56B0/#resulttype-è¾“å‡ºæ˜ å°„" class="sidebar-link">resultType è¾“å‡ºæ˜ å°„</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/4F77B035DFDB56B0/#resultmap-è¾“å‡ºæ˜ å°„" class="sidebar-link">resultMap è¾“å‡ºæ˜ å°„</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/4F77B035DFDB56B0/#resultmap-è‡ªåŠ¨æ˜ å°„çº§åˆ«" class="sidebar-link">resultMap è‡ªåŠ¨æ˜ å°„çº§åˆ«</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/blog/pages/4F77B035DFDB56B0/#è”è¡¨æŸ¥è¯¢" class="sidebar-link">è”è¡¨æŸ¥è¯¢</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/blog/pages/4F77B035DFDB56B0/#resultmap-é«˜çº§ç»“æœæ˜ å°„" class="sidebar-link">resultMap é«˜çº§ç»“æœæ˜ å°„</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/4F77B035DFDB56B0/#ä¸€å¯¹ä¸€å…³è”æŸ¥è¯¢-association" class="sidebar-link">ä¸€å¯¹ä¸€å…³è”æŸ¥è¯¢ï¼šassociation</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/4F77B035DFDB56B0/#ä¸€å¯¹å¤šå…³è”æŸ¥è¯¢-collection" class="sidebar-link">ä¸€å¯¹å¤šå…³è”æŸ¥è¯¢ï¼šcollection</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/4F77B035DFDB56B0/#_6-4-å¤šå¯¹å¤šå…³è”æŸ¥è¯¢" class="sidebar-link">6.4 å¤šå¯¹å¤šå…³è”æŸ¥è¯¢</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/blog/pages/4F77B035DFDB56B0/#mybatis-åŠ¨æ€-sql" class="sidebar-link">Mybatis åŠ¨æ€ SQL</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/blog/pages/4F77B035DFDB56B0/#if" class="sidebar-link">if</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/4F77B035DFDB56B0/#where" class="sidebar-link">where</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/4F77B035DFDB56B0/#set" class="sidebar-link">set</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/4F77B035DFDB56B0/#trim" class="sidebar-link">trim</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/4F77B035DFDB56B0/#foreach" class="sidebar-link">foreach</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/4F77B035DFDB56B0/#choose" class="sidebar-link">choose</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/4F77B035DFDB56B0/#sqlã€include" class="sidebar-link">sqlã€include</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/blog/pages/4F77B035DFDB56B0/#äº‹åŠ¡æ§åˆ¶" class="sidebar-link">äº‹åŠ¡æ§åˆ¶</a></li><li class="sidebar-sub-header level2"><a href="/blog/pages/4F77B035DFDB56B0/#è¿æ¥æ± " class="sidebar-link">è¿æ¥æ± </a></li><li class="sidebar-sub-header level2"><a href="/blog/pages/4F77B035DFDB56B0/#å»¶è¿ŸåŠ è½½" class="sidebar-link">å»¶è¿ŸåŠ è½½</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/blog/pages/4F77B035DFDB56B0/#association" class="sidebar-link">association</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/4F77B035DFDB56B0/#collection" class="sidebar-link">collection</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/4F77B035DFDB56B0/#æ ¸å¿ƒé…ç½®æ–‡ä»¶è®¾ç½®" class="sidebar-link">æ ¸å¿ƒé…ç½®æ–‡ä»¶è®¾ç½®</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/blog/pages/4F77B035DFDB56B0/#mybatis-ç¼“å­˜" class="sidebar-link">Mybatis ç¼“å­˜</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/blog/pages/4F77B035DFDB56B0/#ä¸€çº§ç¼“å­˜" class="sidebar-link">ä¸€çº§ç¼“å­˜</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/4F77B035DFDB56B0/#äºŒçº§ç¼“å­˜" class="sidebar-link">äºŒçº§ç¼“å­˜</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/blog/pages/4F77B035DFDB56B0/#mybatis-æ³¨è§£å¼€å‘" class="sidebar-link">Mybatis æ³¨è§£å¼€å‘</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/blog/pages/4F77B035DFDB56B0/#å¢-insert" class="sidebar-link">å¢ï¼š@Insert</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/4F77B035DFDB56B0/#åˆ -delete" class="sidebar-link">åˆ ï¼š@Delete</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/4F77B035DFDB56B0/#æ”¹-update" class="sidebar-link">æ”¹ï¼š@Update</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/4F77B035DFDB56B0/#æŸ¥-select" class="sidebar-link">æŸ¥ï¼š@Select</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/4F77B035DFDB56B0/#ç»´æŠ¤ä¸»é”®å€¼-selectkey" class="sidebar-link">ç»´æŠ¤ä¸»é”®å€¼ï¼š@SelectKey</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/4F77B035DFDB56B0/#å°ç»“ä¸€æ³¢" class="sidebar-link">å°ç»“ä¸€æ³¢</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/4F77B035DFDB56B0/#ä¸€å¯¹ä¸€" class="sidebar-link">ä¸€å¯¹ä¸€</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/4F77B035DFDB56B0/#ä¸€å¯¹ä¸€çš„å»¶è¿ŸåŠ è½½" class="sidebar-link">ä¸€å¯¹ä¸€çš„å»¶è¿ŸåŠ è½½</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/4F77B035DFDB56B0/#ä¸€å¯¹å¤šåŠå»¶è¿ŸåŠ è½½" class="sidebar-link">ä¸€å¯¹å¤šåŠå»¶è¿ŸåŠ è½½</a></li></ul></li></ul></li><li><a href="/blog/pages/2180198A4D054652/" class="sidebar-link">Mybatis-plusä»£ç ç”Ÿæˆå™¨</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Spring</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>å¹¶å‘</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>æ—¥å¿—æŠ€æœ¯</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/blog/" title="é¦–é¡µ" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/blog/backend/#åç«¯" data-v-06225672>åç«¯</a></li><li data-v-06225672><a href="/blog/backend/#MyBatis" data-v-06225672>MyBatis</a></li></ul> <div class="info" data-v-06225672><div title="ä½œè€…" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/Fitminf" target="_blank" title="ä½œè€…" class="beLink" data-v-06225672>fitminf</a></div> <div title="åˆ›å»ºæ—¶é—´" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-09-23</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">ç›®å½•</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">MybatisåŸºæœ¬ä½¿ç”¨<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="mybatisåŸºæœ¬ä½¿ç”¨"><a href="#mybatisåŸºæœ¬ä½¿ç”¨" class="header-anchor">#</a> MybatisåŸºæœ¬ä½¿ç”¨</h1> <h2 id="æ ¸å¿ƒå¯¹è±¡"><a href="#æ ¸å¿ƒå¯¹è±¡" class="header-anchor">#</a> æ ¸å¿ƒå¯¹è±¡</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>	SqlSessionFactoryBuilder
				 |
   		  build() |
				 â†“			openSession()
  		 SqlSessionFactory ------------------â†’SqlSession
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ol><li>æ¯ä¸ª mybatis ç¨‹åºéƒ½ä»¥ä¸€ä¸ª SqlSessionFactory å¯¹è±¡çš„å®ä¾‹ä¸ºæ ¸å¿ƒã€‚</li> <li>é¦–å…ˆè·å– SqlSessionFactoryBuilder å¯¹è±¡ï¼Œå¯ä»¥æ ¹æ® xml é…ç½®æ–‡ä»¶æˆ– Configuration ç±»çš„å®ä¾‹æ„å»ºè¯¥å¯¹è±¡ã€‚</li> <li>ç„¶åè·å– SqlSessionFactory å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å®ä¾‹å¯ä»¥é€šè¿‡ SqlSessionFactoryBuilder å¯¹è±¡æ¥è·å¾—ã€‚</li> <li>æœ‰äº† SqlSessionFactory ä¹‹åï¼Œå¯ä»¥è¿›è€Œè·å– SqlSession å®ä¾‹ï¼ŒSqlSession å¯¹è±¡ä¸­å®Œå…¨åŒ…å«ä»¥æ•°æ®åº“ä¸ºèƒŒæ™¯çš„æ‰€æœ‰æ‰§è¡Œ SQL æ“ä½œçš„æ–¹æ³•ï¼Œå¯ä»¥ç”¨è¯¥å®ä¾‹æ¥ç›´æ¥æ‰§è¡Œå·²æ˜ å°„çš„ SQL è¯­å¥ã€‚</li></ol> <h3 id="sqlsessionfactorybuilder"><a href="#sqlsessionfactorybuilder" class="header-anchor">#</a> SqlSessionFactoryBuilder</h3> <ul><li><p>ç”Ÿå‘½å‘¨æœŸ</p> <ul><li>ç”¨è¿‡å³ä¸¢</li></ul></li> <li><p>ä½œç”¨åŸŸ</p> <ul><li>å…¶åªå­˜åœ¨äºæ–¹æ³•ä½“å†…</li></ul></li> <li><p>ä½œç”¨</p> <ul><li><p>å¯é‡ç”¨å…¶æ¥åˆ›å»ºå¤šä¸ª SqlSessionFactory å®ä¾‹ã€‚</p></li> <li><p>è´Ÿè´£æ„å»º SqlSessionFactoryï¼Œå¹¶æä¾›å¤šä¸ªbuildæ–¹æ³•çš„é‡è½½ã€‚</p> <ul><li>build(InputStream inputStream, String environment, Properties properties)</li> <li>build(Reader reader, String environment, Properties properties)</li> <li>build(Configuration config)</li></ul></li> <li><p>é…ç½®ä¿¡æ¯ä»¥ä¸‰ç§å½¢å¼æä¾›ç»™ SqlSessionFactory çš„ build æ–¹æ³•ã€‚</p> <ul><li>InputStream(å­—èŠ‚æµï¼‰ã€Readerï¼ˆå­—ç¬¦æµï¼‰ã€Configurationï¼ˆç±»ï¼‰</li></ul></li> <li><p>è¯»å–XMLæ–‡ä»¶æ„é€ æ–¹å¼</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 1.åŠ è½½sqlMapConfig.xml</span>
<span class="token class-name">String</span> resource <span class="token operator">=</span> <span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">;</span> ã€€ã€€
<span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 2.è¯»å–è§£æé…ç½®æ–‡ä»¶å†…å®¹</span>
<span class="token class-name">SqlSessionFactoryBuilder</span> builder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// å®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œåœ¨ä¸€ä¸ªé¡¹ç›®é€šå¸¸åªéœ€è¦ä¸€ä¸ªï¼ˆå•ä¾‹è®¾è®¡æ¨¡å¼çš„åº”ç”¨ï¼‰</span>
sqlSessionFactory <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ul></li></ul> <h3 id="sqlsessionfactory"><a href="#sqlsessionfactory" class="header-anchor">#</a> SqlSessionFactory</h3> <p><strong>SqlSessionFactory æ˜¯æ¯ä¸ª MyBatis åº”ç”¨çš„æ ¸å¿ƒ</strong></p> <ul><li><p>ç”Ÿå‘½å‘¨æœŸ</p> <ul><li>ä¸åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸç›¸åŒ</li></ul></li> <li><p>ä½œç”¨åŸŸ</p> <ul><li>Application</li></ul></li> <li><p>ä½œç”¨</p> <ul><li><p>åˆ›å»ºSqlSessionå®ä¾‹çš„å·¥å‚ï¼ˆFactoryï¼‰</p> <ul><li><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">SqlSession</span> session <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> autoCommit<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li></ul></li> <li><p>å•ä¾‹</p> <ul><li>å­˜åœ¨äºæ•´ä¸ªåº”ç”¨è¿è¡Œæ—¶ï¼Œå¹¶ä¸”åŒæ—¶åªå­˜åœ¨ä¸€ä¸ª SqlSessionFactory å¯¹è±¡å®ä¾‹</li></ul></li></ul> <p><strong>æœ€ç®€å•çš„å®ç°æ–¹å¼å°±æ˜¯æ”¾åœ¨é™æ€ä»£ç å—ä¸­</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyBatisUtils</span> <span class="token punctuation">{</span>
	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">SqlSessionFactory</span> factory<span class="token punctuation">;</span>	
	<span class="token keyword">static</span><span class="token punctuation">{</span>
		<span class="token keyword">try</span> <span class="token punctuation">{</span>
			<span class="token comment">//1è·å–mybatis-config.xmlçš„è¾“å…¥æµ</span>
			<span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//2åˆ›å»ºSqlSessionFactoryå¯¹è±¡ï¼Œå®Œæˆå¯¹é…ç½®æ–‡ä»¶çš„è¯»å–</span>
			factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="sqlsession"><a href="#sqlsession" class="header-anchor">#</a> SqlSession</h3> <ul><li>ä½œç”¨
<ul><li>ç”¨äºæŒä¹…åŒ–æ“ä½œçš„å¯¹è±¡ï¼Œç±»ä¼¼äº jdbc çš„ Connection åŒ…å«äº†æ‰§è¡Œ SQL æ‰€éœ€çš„æ‰€æœ‰æ–¹æ³•ã€‚</li></ul></li> <li>ç”Ÿå‘½å‘¨æœŸ
<ul><li>å¯¹åº”ä¸€æ¬¡æ•°æ®åº“ä¼šè¯ï¼Œä¼šè¯ç»“æŸå¿…é¡»å…³é—­ã€‚</li></ul></li> <li>ä½œç”¨åŸŸ
<ul><li>request ä½œç”¨åŸŸã€‚</li></ul></li></ul> <blockquote><p>æ³¨æ„ï¼šSqlSession æ˜¯çº¿ç¨‹çº§åˆ«ï¼Œä¸èƒ½å…±äº«</p></blockquote> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//åˆ›å»ºå’Œå…³é—­SqlSessionå¯¹è±¡å’Œå…³é—­SqlSession</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">SqlSession</span> <span class="token function">createSqlSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> factory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å…³é—­äº‹ç‰©è‡ªåŠ¨æäº¤</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">closeSqlSession</span><span class="token punctuation">(</span><span class="token class-name">SqlSession</span> sqlSession<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> sqlSession<span class="token punctuation">)</span><span class="token punctuation">{</span>
		sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>openSession(boolean autoCommit)</strong></p> <ul><li><p>è‹¥å‚æ•°ä¸º true è¡¨ç¤ºå…³é—­äº‹ç‰©æ§åˆ¶ï¼Œå¼€å¯è‡ªåŠ¨æäº¤ã€‚</p></li> <li><p>è‹¥å‚æ•°ä¸º false è¡¨ç¤ºå¼€å¯äº‹ç‰©æ§åˆ¶ï¼Œå…³é—­è‡ªåŠ¨æäº¤ã€‚</p></li> <li><p>è‹¥æ²¡æœ‰å‚æ•°ï¼Œé»˜è®¤ä¸º trueã€‚</p></li></ul> <blockquote><p>æ³¨æ„ï¼š</p> <p>å…³é—­ SqlSession éå¸¸é‡è¦ï¼Œå¿…é¡»è¦ç¡®ä¿åœ¨ finally æ–¹æ³•ä½“ä¸­æ­£å¸¸å…³é—­ã€‚</p> <p>åœ¨ SqlSession é‡Œå¯ä»¥æ‰§è¡Œå¤šæ¬¡ SQL è¯­å¥ï¼Œä½†ä¸€æ—¦å…³é—­äº† SqlSession å°±éœ€è¦é‡æ–°åˆ›å»ºã€‚</p></blockquote> <p><strong>SqlSession çš„è·å–æ–¹å¼</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">String</span> resource <span class="token operator">=</span> <span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">;</span> ã€€ã€€
<span class="token class-name">InputStream</span>  is <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span> ã€€ã€€
<span class="token class-name">SqlSessionFactory</span> factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span> <span class="token punctuation">;</span>
<span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>SqlSession çš„ä¸¤ç§ä½¿ç”¨æ–¹å¼</strong></p> <ul><li>é€šè¿‡ SqlSession å®ä¾‹ç›´æ¥è¿è¡Œæ˜ å°„çš„ SQL è¯­å¥ã€‚</li> <li>åŸºäº Mapper æ¥å£æ–¹å¼æ“ä½œæ•°æ®ï¼ˆæ¨èï¼‰ã€‚</li></ul> <h2 id="æ ¸å¿ƒé…ç½®"><a href="#æ ¸å¿ƒé…ç½®" class="header-anchor">#</a> æ ¸å¿ƒé…ç½®</h2> <p><code>sqlMapConfig.xml</code> æ˜¯ mybatis æ¡†æ¶çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œç›®å‰æˆ‘ä»¬åœ¨å…¶ä¸­é…ç½®äº†è¿è¡Œç¯å¢ƒï¼ˆæ•°æ®æºï¼‰å’ŒåŠ è½½æ˜ å°„æ–‡ä»¶ã€‚</p> <p><strong>æ–‡ä»¶å¤´éƒ¨</strong>ï¼š</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">configuration</span> <span class="token name">PUBLIC</span> 
	<span class="token string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span> 
	<span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>æ ¸å¿ƒå…ƒç´ </strong></p> <table><thead><tr><th style="text-align:center;">é¡ºåº</th> <th style="text-align:left;">é…ç½®æ ‡ç­¾åç§°</th> <th>è¯´æ˜</th></tr></thead> <tbody><tr><td style="text-align:center;">1</td> <td style="text-align:left;">properties</td> <td>å±æ€§</td></tr> <tr><td style="text-align:center;">2</td> <td style="text-align:left;">settings</td> <td>é…ç½®å…¨å±€å‚æ•°</td></tr> <tr><td style="text-align:center;">3</td> <td style="text-align:left;">ypeAliases</td> <td>ç±»å‹åˆ«å</td></tr> <tr><td style="text-align:center;">4</td> <td style="text-align:left;">ypeHandlers</td> <td>ç±»å‹å¤„ç†å™¨</td></tr> <tr><td style="text-align:center;">5</td> <td style="text-align:left;">objectFactory</td> <td>å¯¹è±¡å·¥å‚</td></tr> <tr><td style="text-align:center;">6</td> <td style="text-align:left;">plugins</td> <td>æ’ä»¶</td></tr> <tr><td style="text-align:center;">7</td> <td style="text-align:left;">environments</td> <td>ç¯å¢ƒé›†åˆå±æ€§å¯¹è±¡</td></tr> <tr><td style="text-align:center;">8</td> <td style="text-align:left;">databaseIdProvider</td> <td>å¤šæ•°æ®åº“æ”¯æŒ</td></tr> <tr><td style="text-align:center;">9</td> <td style="text-align:left;">mappers</td> <td>æ˜ å°„å™¨</td></tr></tbody></table> <blockquote><p>æ³¨æ„ï¼šåœ¨ sqlMapConfig.xml ä¸­å¿…é¡»æ˜¯ä»ä¸Šå¾€ä¸‹çš„é…ç½®é¡ºåºã€‚</p></blockquote> <h3 id="properties"><a href="#properties" class="header-anchor">#</a> properties</h3> <ul><li><p>ä½œç”¨</p> <ul><li>åŠ è½½å±æ€§èµ„æºæ–‡ä»¶å’Œå®šä¹‰å±æ€§ã€‚</li></ul></li> <li><p>å±æ€§</p> <ul><li>resourceï¼šåŠ è½½<strong>æœ¬åœ°</strong>å±æ€§èµ„æºæ–‡ä»¶</li> <li>urlï¼šåŠ è½½<strong>ç½‘ç»œ</strong>ä¸Šçš„å±æ€§èµ„æºæ–‡ä»¶ï¼ˆurl=&quot;http://127.0.0.1:8081/db.properties&quot;ï¼‰</li></ul></li> <li><p>ç¤ºä¾‹</p> <ul><li><p>é…ç½®æ–¹å¼ä¸€</p> <ul><li><p>database.properties</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">database.driver</span><span class="token punctuation">=</span><span class="token value attr-value">com.mysql.jdbc.Driver</span>
<span class="token key attr-name">database.url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql://localhost:3306/mybatis</span>
<span class="token key attr-name">database.username</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
<span class="token key attr-name">database.password</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>sqlMapConfig.xml</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--åŠ è½½databaseæ•°æ®åº“èµ„æºæ–‡ä»¶--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>database.properties<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
...
<span class="token comment">&lt;!--é…ç½®æ•°æ®åº“çš„è¿æ¥ä¿¡æ¯--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>POOLED<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${database.driver}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${database.url}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${database.username}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${database.password}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li></ul></li> <li><p>é…ç½®æ–¹å¼äºŒ</p> <ul><li><p>sqlMapConfig.xml</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>database.driver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mysql.jdbc.Driver<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>database.url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc:mysql://localhost:3306/mybatis<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>database.username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>database.password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
...
<span class="token comment">&lt;!--é…ç½®æ•°æ®åº“çš„è¿æ¥ä¿¡æ¯--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>POOLED<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${database.driver}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${database.url}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${database.username}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${database.password}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></li></ul></li></ul></li></ul> <blockquote><p>æ³¨æ„ï¼šä¸¤ç§ä¸€èµ·é…ç½® resource å±æ€§å€¼çš„ä¼˜å…ˆçº§é«˜äº property å­èŠ‚ç‚¹é…ç½®çš„å€¼ã€‚</p></blockquote> <h3 id="settings"><a href="#settings" class="header-anchor">#</a> settings</h3> <ul><li><p>ä½œç”¨</p> <ul><li>é…ç½® MyBatis çš„ä¸€äº›å…¨å±€å±æ€§ï¼Œç”¨æ¥ä¿®æ”¹ MyBatis è¿è¡Œæ—¶çš„è¡Œä¸ºæ–¹å¼ã€‚</li></ul></li> <li><p>ç¤ºä¾‹</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>settings</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--å¼€å¯å»¶è¿ŸåŠ è½½--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lazyLoadingEnabled<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token comment">&lt;!--åŠ è½½ç­–ç•¥ï¼šæ¶ˆæåŠ è½½ï¼ˆé»˜è®¤falseï¼Œå¯ä»¥ä¸é…ï¼‰--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>aggressiveLazyLoading<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token comment">&lt;!--é…ç½®å¼€å¯äºŒçº§ç¼“å­˜--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cacheEnabled<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>settings</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ul> <blockquote><p>æ³¨æ„ï¼šä¸€å…±æœ‰å¤šä¸ªé…ç½®é¡¹ï¼Œå‰©ä½™å‚è€ƒ mybatis å¼€å‘æ‰‹å†Œã€‚</p></blockquote> <h3 id="typealiases"><a href="#typealiases" class="header-anchor">#</a> typeAliases</h3> <ul><li><p>ä½œç”¨</p> <ul><li>é…ç½®åˆ«åï¼ˆç®€ç§°ï¼‰ã€‚</li></ul></li> <li><p>å±æ€§</p> <ul><li>typeï¼šæŒ‡å®šåˆ«åçš„ç±»å‹ã€‚</li> <li>aliasï¼šæŒ‡å®šåˆ«åçš„åç§°ã€‚
<ul><li>é»˜è®¤ä½¿ç”¨ç±»çš„åç§°ä½œä¸ºåˆ«åçš„åç§°</li></ul></li></ul></li> <li><p>ç¤ºä¾‹</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAlias</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.yang.pojo.User<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAlias</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.yang.pojo.Orders<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>orders<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAlias</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.yang.pojo.QueryVo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>queryVo<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>å­å…ƒç´ </p> <ul><li><p>packageï¼šæ‰«æè¦é…ç½®åˆ«åçš„åŒ…ã€‚</p> <ul><li><p>å±æ€§</p> <ul><li>name
<ul><li>æŒ‡å®šè¦æ‰«æçš„åŒ…ã€‚</li></ul></li></ul></li> <li><p>ç¤ºä¾‹</p> <ul><li><div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.yang.pojo<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li></ul></li></ul></li></ul> <blockquote><p>æ³¨æ„ï¼š</p> <ol><li>nameï¼šæŒ‡å®šè¦æ‰«æçš„åŒ…</li> <li>é»˜è®¤éƒ½æ˜¯ä½¿ç”¨ç±»çš„æ˜ä½œä¸ºåˆ«åçš„åç§°</li> <li>å¦‚æœæœ‰å¤šä¸ªåŒ…ã€‚åœ¨åŒä¸€ä¸ªçˆ¶åŒ…ä¸‹ï¼Œé…ç½®çˆ¶åŒ…å³å¯</li> <li>å¦‚æœä¸åœ¨åŒä¸€ä¸ªçˆ¶åŒ…ï¼Œé…ç½®å¤šä¸ªï¼š<code>&lt;package name=&quot;cn.itheima.po1&quot;/&gt;</code></li> <li>å®é™…é¡¹ç›®ä¸­æ¨èä½¿ç”¨çš„æ–¹å¼</li></ol></blockquote> <p><strong>å†…ç½®åˆ«å</strong></p> <table><thead><tr><th>åˆ«å</th> <th>æ˜ å°„ç±»å‹</th></tr></thead> <tbody><tr><td>_byte</td> <td>byte</td></tr> <tr><td>_long</td> <td>long</td></tr> <tr><td>_short</td> <td>short</td></tr> <tr><td>_int</td> <td>int</td></tr> <tr><td>_integer</td> <td>int</td></tr> <tr><td>_double</td> <td>double</td></tr> <tr><td>_float</td> <td>float</td></tr> <tr><td>_boolean</td> <td>boolean</td></tr> <tr><td>string</td> <td>String</td></tr> <tr><td>byte</td> <td>Byte</td></tr> <tr><td>long</td> <td>Long</td></tr> <tr><td>short</td> <td>Short</td></tr> <tr><td>int</td> <td>Integer</td></tr> <tr><td>integer</td> <td>Integer</td></tr> <tr><td>double</td> <td>Double</td></tr> <tr><td>float</td> <td>Float</td></tr> <tr><td>boolean</td> <td>Boolean</td></tr> <tr><td>date</td> <td>Date</td></tr> <tr><td>decimal</td> <td>BigDecimal</td></tr> <tr><td>bigdecimal</td> <td>BigDecimal</td></tr> <tr><td>object</td> <td>Object</td></tr> <tr><td>map</td> <td>Map</td></tr> <tr><td>hashmap</td> <td>HashMap</td></tr> <tr><td>list</td> <td>List</td></tr> <tr><td>arraylist</td> <td>ArrayList</td></tr> <tr><td>collection</td> <td>Collection</td></tr> <tr><td>iterator</td> <td>Iterator</td></tr></tbody></table> <ul><li>å†…ç½®åˆ«åå¯ä»¥ç›´æ¥ä½¿ç”¨</li> <li>åˆ«åä¸åŒºåˆ†å¤§å°å†™</li></ul> <h3 id="environments"><a href="#environments" class="header-anchor">#</a> environments</h3> <ul><li><p>ä½œç”¨</p> <ul><li>é…ç½® MyBatis çš„å¤šå¥—è¿è¡Œç¯å¢ƒï¼Œå°† SQL æ˜ å°„åˆ°å¤šä¸ªä¸åŒçš„æ•°æ®åº“ä¸Šã€‚</li></ul></li> <li><p>å±æ€§</p> <ul><li>default
<ul><li>æŒ‡å®šä½¿ç”¨å“ªä¸€ä¸ªè¿è¡Œç¯å¢ƒã€‚</li></ul></li></ul></li> <li><p>å­å…ƒç´ </p> <ul><li>environmentï¼šé…ç½®ä¸€ä¸ªè¿è¡Œç¯å¢ƒï¼Œå¯ä»¥é…ç½®å¤šä¸ªï¼Œä½†æ˜¯å¿…é¡»è¦æœ‰ä¸€ä¸ª id å€¼è¢« environments çš„ default å±æ€§å€¼æ‰€æŒ‡å®šã€‚
<ul><li>å±æ€§
<ul><li>idï¼šå”¯ä¸€æ ‡è¯†ä¸€ä¸ªè¿è¡Œç¯å¢ƒã€‚</li></ul></li> <li>å­å…ƒç´ 
<ul><li>transactionManagerï¼šé…ç½®äº‹åŠ¡ã€‚
<ul><li>å±æ€§
<ul><li>type=&quot;JDBC&quot;ï¼šé»˜è®¤ä½¿ç”¨jdbcäº‹åŠ¡ã€‚</li></ul></li></ul></li> <li>dataSourceï¼šé…ç½®æ•°æ®æºã€‚
<ul><li>å±æ€§
<ul><li>type=&quot;POOLED&quot;ï¼šmybatiså†…éƒ¨æä¾›çš„è¿æ¥æ± ã€‚
<ul><li>å…¶ä»–å€¼ï¼šUNPOOLED|JNDI</li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li> <li><p>ç¤ºä¾‹</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- defaultï¼šæŒ‡å®šä½¿ç”¨å“ªä¸€ä¸ªè¿è¡Œç¯å¢ƒ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environments</span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mysql<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--idï¼šå”¯ä¸€æ ‡è¯†ä¸€ä¸ªè¿è¡Œç¯å¢ƒ--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mysql<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--é…ç½®äº‹åŠ¡ï¼Œè¯´æ˜ï¼š
            type=&quot;JDBC&quot;ï¼šé»˜è®¤ä½¿ç”¨jdbcäº‹åŠ¡
        --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transactionManager</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>JDBC<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token comment">&lt;!--é…ç½®æ•°æ®æºï¼Œè¯´æ˜ï¼š
            type=&quot;POOLED&quot;ï¼šmybatiså†…éƒ¨æä¾›çš„è¿æ¥æ± 
        --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>POOLED<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${database.driver}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${database.url}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${database.username}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${database.password}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environments</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div></li></ul> <h3 id="mappers"><a href="#mappers" class="header-anchor">#</a> mappers</h3> <ul><li>ä½œç”¨
<ul><li>å®šä¹‰ SQL æ˜ å°„è¯­å¥ã€‚</li> <li>é¡»åœ¨é…ç½®ä¸­å¼•ç”¨ mapper æ˜ å°„æ–‡ä»¶ã€‚</li></ul></li> <li>å­å…ƒç´ 
<ul><li>mapperï¼šæ˜ å°„å™¨
<ul><li>å±æ€§
<ul><li>resourceï¼šä½¿ç”¨ç±»èµ„æºè·¯å¾„è·å–èµ„æºã€‚</li> <li>urlï¼šä½¿ç”¨ url è·å–èµ„æºã€‚</li></ul></li></ul></li> <li>packageï¼šåŒ…æ‰«æå™¨
<ul><li>å±æ€§
<ul><li>nameï¼šè¦æ‰«æçš„åŒ…çš„è·¯å¾„ã€‚</li></ul></li></ul></li></ul></li></ul> <blockquote><ul><li><p>å½“æœ‰å°‘é‡æ˜ å°„æ–‡ä»¶éœ€è¦åŠ è½½æ—¶ä½¿ç”¨ mapper æ˜ å°„å™¨</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sqlmap\UserMapper.xml<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sqlmap\OrdersMapper.xml<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>å½“æœ‰å¤šä¸ªæ˜ å°„æ–‡ä»¶éœ€è¦åŠ è½½æ—¶ä½¿ç”¨ package åŒ…æ‰«æå™¨ç»§ç»­æ‰¹é‡åŠ è½½</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.yang.mapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></blockquote> <h2 id="sql-æ˜ å°„æ–‡ä»¶"><a href="#sql-æ˜ å°„æ–‡ä»¶" class="header-anchor">#</a> Sql æ˜ å°„æ–‡ä»¶</h2> <p><strong>MyBatis çœŸæ­£çš„å¼ºå¤§åœ¨äºæ˜ å°„è¯­å¥ï¼Œä¸“æ³¨äº SQLï¼ŒåŠŸèƒ½å¼ºå¤§ï¼ŒSQL æ˜ å°„çš„é…ç½®å´æ˜¯ç›¸å½“ç®€å•ã€‚</strong></p> <ul><li><p>æ–‡ä»¶å¤´éƒ¨</p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; 
	&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul> <h3 id="mapper"><a href="#mapper" class="header-anchor">#</a> mapper</h3> <ul><li><p>mapperï¼šæ˜ å°„æ–‡ä»¶çš„æ ¹èŠ‚ç‚¹ã€‚</p></li> <li><p>å±æ€§</p> <ul><li>namespaceï¼šmapper åªæœ‰ä¸€ä¸ª namespaceï¼ˆå‘½åç©ºé—´ï¼‰å±æ€§ï¼Œç»‘å®š DAO æ¥å£ï¼ŒåŒºåˆ«ä¸åŒçš„ mapperã€‚</li> <li>namespace çš„å‘½åå¿…é¡»è·ŸæŸä¸ªæ¥å£åŒåã€‚</li> <li>æ¥å£ä¸­çš„æ–¹æ³•åä¸æ˜ å°„æ–‡ä»¶ä¸­ SQL è¯­å¥ id ä¸€ä¸€å¯¹åº”ã€‚</li></ul></li> <li><p>ç¤ºä¾‹</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.yang.mapper.UserMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!--æŸ¥è¯¢ç”¨æˆ·æ•°æ®åˆ—è¡¨--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findUserList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        select * from user;
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul> <h3 id="select"><a href="#select" class="header-anchor">#</a> select</h3> <ul><li><p>selectï¼šæ˜ å°„æŸ¥è¯¢è¯­å¥</p></li> <li><p>å±æ€§</p> <ul><li>idï¼šå”¯ä¸€æ ‡è¯†çš„åç§°ï¼Œä¸æ¥å£æ–¹æ³•åç§°ä¸€è‡´ã€‚</li> <li>parameterTypeï¼šå‚æ•°ç±»å‹ï¼Œä¸æ¥å£æ–¹æ³•çš„å½¢å‚ç±»å‹ä¸€è‡´ã€‚</li> <li>resultTypeï¼šè¿”å›å€¼ç±»å‹ï¼Œä¸æ¥å£æ–¹æ³•çš„è¿”å›å€¼ç±»å‹ä¸€è‡´ã€‚</li></ul></li> <li><p>ç¤ºä¾‹</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--æŸ¥è¯¢ç”¨æˆ·æ•°æ®åˆ—è¡¨--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findUserList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	select * from user;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul> <h3 id="insert"><a href="#insert" class="header-anchor">#</a> insert</h3> <ul><li><p>insertï¼šæ˜ å°„æ’å…¥è¯­å¥</p></li> <li><p>å±æ€§</p> <ul><li>idï¼šå”¯ä¸€æ ‡è¯†çš„åç§°ï¼Œä¸æ¥å£æ–¹æ³•åç§°ä¸€è‡´ã€‚</li> <li>parameterTypeï¼šå‚æ•°ç±»å‹ï¼Œä¸æ¥å£æ–¹æ³•çš„å½¢å‚ç±»å‹ä¸€è‡´ã€‚</li></ul></li> <li><p>å­å…ƒç´ </p> <ul><li>selectKeyï¼šæŸ¥è¯¢ä¸»é”®ã€‚
<ul><li>keyColumnï¼šä¸»é”®å­—æ®µã€‚</li> <li>keyPropertyï¼šå¯¹åº”å®ä½“ç±»çš„ä¸»é”®å±æ€§ã€‚</li> <li>resultTypeï¼šä¸»é”®å­—æ®µç±»å‹ã€‚</li> <li>orderï¼šæŒ‡å®šåœ¨ insert è¯­å¥æ‰§è¡Œå‰è¿˜æ˜¯æ‰§è¡Œåè·å–ä¸»é”®å€¼ã€‚
<ul><li>AFTERï¼šåœ¨ insert è¯­å¥æ‰§è¡Œåã€‚</li> <li>BEFOREï¼šåœ¨ insert è¯­å¥æ‰§è¡Œå‰ã€‚</li></ul></li></ul></li></ul></li> <li><p>ç¤ºä¾‹</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>addUser<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itheima.po.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>selectKey</span> <span class="token attr-name">keyColumn</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">keyProperty</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>int<span class="token punctuation">&quot;</span></span> <span class="token attr-name">order</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>AFTER<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    	select LAST_INSERT_ID()
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>selectKey</span><span class="token punctuation">&gt;</span></span>
    insert into `user`(username,birthday,sex,address)
    values(#{username},#{birthday},#{sex},#{address})
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li><p>è¿™æ®µä»£ç æ„æ€æ˜¯ï¼Œåœ¨æœ‰è‡ªåŠ¨å¢é•¿çš„ä¸»é”®çš„è¡¨é‡Œæ·»åŠ æ•°æ®æ˜¯å¯ä»¥ä¸éœ€è¦ä¼ å…¥ä¸»é”®å€¼çš„ï¼Œä½†æ˜¯æ’å…¥æ•°æ®ååˆæƒ³çœ‹åˆ°å½“å‰ä¸»é”®çš„å€¼æ˜¯å¤šå°‘ï¼Œæ­¤æ—¶å¯ä»¥ç”¨è¿™æ ·çš„ sql è¯­å¥å»è·å–æœ€åæ·»åŠ çš„ä¸»é”®çš„å€¼ï¼šselect LAST_INSERT_ID()</p></li> <li><p>oralce æ•°æ®åº“ä½¿ç”¨å¦‚ä¸‹</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>insertUser<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itheima.po.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>selectKey</span> <span class="token attr-name">keyColumn</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">keyProperty</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>int<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">order</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>BEFORE<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		select seq.nextval from dual
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>selectKey</span><span class="token punctuation">&gt;</span></span>
	insert into `user`(id,username,birthday,sex,address) 
	values(#{id},#{username},#{birthday},#{sex},#{address})	
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>åŒºåˆ«åœ¨äº order å±æ€§å€¼ä¸ºï¼šBEFOREï¼Œå› ä¸º Oracle æ•°æ®åº“æ²¡æœ‰è‡ªåŠ¨å¢é•¿çš„æ¦‚å¿µã€‚</li></ul></li> <li><p>å¯ä»¥æ”¹å†™æˆï¼ˆ<strong>æ­¤æ–¹æ³•ä¸æ”¯æŒ Oracle æ•°æ®åº“</strong>ï¼‰</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>addUser<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itheima.po.User<span class="token punctuation">&quot;</span></span> 
<span class="token attr-name">useGeneratedKeys</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">keyColumn</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">keyProperty</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    insert into `user`(username,birthday,sex,address)
    values(#{username},#{birthday},#{sex},#{address})
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul></li></ul> <h3 id="update"><a href="#update" class="header-anchor">#</a> update</h3> <p><strong>ç”±äºæ•°æ®çš„å¢åˆ æ”¹éƒ½æ¯”è¾ƒç®€å•ï¼Œé™¤äº† insert è¯­å¥å¤šäº†ä¸€ä¸ªæŸ¥è¯¢ä¸»é”®å­—æ®µï¼Œå…¶ä»–éƒ½æ²¡ä»€ä¹ˆä¸œè¥¿ï¼Œæ‰€ä»¥æ”¾ä¸¤æ®µä»£ç </strong></p> <ul><li><p>ç¤ºä¾‹</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--æ ¹æ®ç”¨æˆ·idä¿®æ”¹ç”¨æˆ·--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updateUser<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    update `user` set sex = #{sex} where id = #{id};
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul> <h3 id="delete"><a href="#delete" class="header-anchor">#</a> delete</h3> <ul><li><p>ç¤ºä¾‹</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--æ ¹æ®ç”¨æˆ·Idåˆ é™¤ç”¨æˆ·--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>delete</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>deleteUser<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    delete from `user` where id = #{id};
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>delete</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul> <h3 id="å ä½ç¬¦"><a href="#å ä½ç¬¦" class="header-anchor">#</a> å ä½ç¬¦</h3> <table><thead><tr><th>ç¬¦å·</th> <th>ç”¨æ³•</th></tr></thead> <tbody><tr><td>#{}</td> <td>å½“å‚æ•°ä¼ é€’çš„æ˜¯ java ç®€å•ç±»å‹æ—¶ï¼šèŠ±æ‹¬å·ä¸­çš„å†…å®¹å¯ä»¥æ˜¯ä»»æ„å­—ç¬¦ä¸²ã€‚<br>å½“å‚æ•°ä¼ é€’çš„æ˜¯ pojo ç±»å‹çš„æ—¶å€™ï¼šèŠ±æ‹¬å·ä¸­çš„å†…å®¹æ˜¯ pojo çš„å±æ€§ã€‚</td></tr> <tr><td>${}</td> <td>å½“å‚æ•°ä¼ é€’çš„æ˜¯ java ç®€å•ç±»å‹æ—¶ï¼šèŠ±æ‹¬å·ä¸­çš„å†…å®¹åªèƒ½æ˜¯ valueã€‚<br>å½“å‚æ•°ä¼ é€’çš„æ˜¯ pojo ç±»å‹çš„æ—¶å€™ï¼šèŠ±æ‹¬å·ä¸­çš„å†…å®¹æ˜¯ pojo çš„å±æ€§ã€‚</td></tr></tbody></table> <blockquote><p>æ³¨æ„ï¼šç®€å•ç±»å‹è¡¨ç¤ºçš„æ˜¯ï¼šå…«ç§åŸºæœ¬ç±»å‹ + å­—ç¬¦ä¸² Stringã€‚</p></blockquote> <blockquote><p>æ˜ å°„æ–‡ä»¶çš„æ‰€æœ‰å…ƒç´ ä¸æ­¢ä¸Šè¿°çš„é‚£å‡ ä¸ªï¼Œä½†æ˜¯æ‰€åˆ—å‡ºéƒ½æ˜¯å¸¸ç”¨çš„ï¼Œè¿˜æœ‰ä¸€äº›åé¢éšç¼˜æåŠã€‚ã€‚ã€‚</p></blockquote> <h3 id="param-æ³¨è§£"><a href="#param-æ³¨è§£" class="header-anchor">#</a> @param æ³¨è§£</h3> <ul><li><p>@param æ³¨è§£ä¸æ˜¯å†™åœ¨æ˜ å°„æ–‡ä»¶ä¸­çš„ï¼Œè€Œæ˜¯ç”¨åœ¨ dao å±‚æ¥å£ä¸Šçš„æ–¹æ³•é‡Œçš„å‚æ•°å‰ã€‚</p> <ul><li><p>ç¤ºä¾‹ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">int</span> <span class="token function">updatePwd</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">,</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;userPassword&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> userPassword<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li> <li><p>åŠ ä¸Š @param æ³¨è§£ä¹‹åï¼Œåœ¨æ˜ å°„æ–‡ä»¶å¯¹åº”çš„ SQL è¯­å¥é‡Œçš„å ä½ç¬¦é‡Œçš„å‚æ•°å°±å¿…é¡»å¯¹åº”ä¸Š @param æ³¨è§£é‡Œçš„å‚æ•°</p> <ul><li><p>ç¤ºä¾‹ï¼š</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updatePwd<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    update smbms_user set userPassword=#{userPassword}
    where id=#{id}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul></li> <li><p>è¿™æ ·åšå¯ä»¥è§£å†³æ¥å£æ–¹æ³•ä¸­çš„å‚æ•°å’Œ sql è¯­å¥ä¸­å ä½ç¬¦çš„å‚æ•°ä¸ä¸€è‡´çš„é—®é¢˜ï¼Œä¸€èˆ¬è¶…è¿‡ 4 ä¸ªå‚æ•°å°±æ˜¯ç”¨ @param æ³¨è§£ã€‚</p></li></ul> <h2 id="è¾“å…¥è¾“å‡ºæ˜ å°„"><a href="#è¾“å…¥è¾“å‡ºæ˜ å°„" class="header-anchor">#</a> è¾“å…¥è¾“å‡ºæ˜ å°„</h2> <h3 id="parametertype-è¾“å…¥æ˜ å°„"><a href="#parametertype-è¾“å…¥æ˜ å°„" class="header-anchor">#</a> parameterType è¾“å…¥æ˜ å°„</h3> <p><strong>Java ç®€å•ç±»å‹</strong></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--æ ¹æ®ç”¨æˆ·è¡¨ä¸»é”®idå­—æ®µæŸ¥è¯¢ç”¨æˆ·æ•°æ®--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findUserListById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>int<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select * from user where id = #{id};
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--æ ¹æ®ç”¨æˆ·åç§°æ¨¡ç³ŠæŸ¥è¯¢ç”¨æˆ·--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findUserListByUsername<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>string<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select * from user where username like '%${value}%';
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>å½“æ–¹æ³•å‚æ•°ä¸ºç®€å•æ•°æ®ç±»å‹æ—¶ï¼ŒparameterType ä¸­ç›´æ¥å†™ä¸Šç®€å•æ•°æ®ç±»å‹</li></ul> <blockquote><p>æ³¨æ„ï¼šè¿™é‡ŒåŒ…æ‹¬å†…ç½®åˆ«åå¯¹åº”çš„ç±»å‹ï¼Œå¦‚ï¼šåŸºæœ¬æ•°æ®ç±»å‹åŒ…è£…ç±»ï¼ŒData ç­‰ç±»å‹ä¹Ÿå¯ä»¥ç›´æ¥å†™å…¥ã€‚</p></blockquote> <p><strong>pojo ç±»å‹</strong></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--æ·»åŠ ç”¨æˆ·--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>addUser<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    insert into `user` values (#{id},#{username},#{birthday},#{sex},#{address});
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>å½“æ–¹æ³•å‚æ•°ä¸ºå®ä½“ç±»æ—¶ï¼ŒparameterType ä¸­å†™ä¸Šå®ä½“ç±»ç±»åã€‚</li> <li>é€šè¿‡#{å±æ€§å}å³å¯è·å–ä¼ å…¥å€¼</li></ul> <blockquote><p>æ³¨æ„ï¼šåœ¨é…ç½®åˆ«åçš„æƒ…å†µä¸‹ parameterType ç›´æ¥å†™ä¸Šç±»åï¼Œé¦–å­—æ¯å¯ä»¥å°å†™ï¼Œå¦‚æœæ²¡æœ‰é…åˆ«åï¼Œè¦å†™ç±»çš„å…¨è·¯å¾„ï¼šcom.yang.pojo.User</p></blockquote> <p><strong>pojo åŒ…è£…ç±»å‹</strong></p> <ul><li><p>å½“ä¸€ä¸ªæŸ¥è¯¢æ–¹æ³•æŸ¥è¯¢å¤šå¼ è¡¨æ•°æ®æ—¶ä½¿ç”¨åŒ…è£…ç±»å‹ï¼ˆè”è¡¨æŸ¥è¯¢ï¼‰ã€‚</p></li> <li><p>æ­¥éª¤ï¼š</p> <ol><li><p>æ–°å»ºåŒ…è£…å®ä½“ç±»</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>yang<span class="token punctuation">.</span>pojo</span><span class="token punctuation">;</span>
<span class="token comment">/**
 * åŒ…è£…å®ä½“ç±»
 * @author Fitminf
 * @version 1.0
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">QueryVo</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">User</span> user<span class="token punctuation">;</span>	<span class="token comment">// åŒ…è£…ç”¨æˆ·</span>
    <span class="token keyword">public</span> <span class="token class-name">QueryVo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">QueryVo</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>user <span class="token operator">=</span> user<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> user<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setUser</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>user <span class="token operator">=</span> user<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div></li> <li><p>å£°æ˜ mapper æ¥å£æ–¹æ³•</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>yang<span class="token punctuation">.</span>mapper</span><span class="token punctuation">;</span>
<span class="token comment">/**
 * ç”¨æˆ·è¡¨mapper
 * @author Fitminf
 * @version 1.0
 */</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserMapper</span> <span class="token punctuation">{</span>
	<span class="token comment">/**
     * ä½¿ç”¨åŒ…è£…ç±»å‹ï¼Œæ ¹æ®ç”¨æˆ·åç§°æ¨¡ç³ŠæŸ¥è¯¢ç”¨æˆ·
     * @param queryVo ä¼ å…¥æ–¹æ³•çš„QueryVoå¯¹è±¡
     * @return List&lt;User&gt;ç±»å‹ï¼Œè¿”å›æŸ¥è¯¢ç»“æœé›†ï¼šç”¨æˆ·å¯¹è±¡ç»“åˆåˆ—è¡¨
     */</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">findUserListByQueryVoUsername</span><span class="token punctuation">(</span><span class="token class-name">QueryVo</span> queryVo<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></li> <li><p>é…ç½® mapper æ˜ å°„æ–‡ä»¶</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--ä½¿ç”¨åŒ…è£…ç±»å‹ï¼Œæ ¹æ®ç”¨æˆ·åç§°æ¨¡ç³ŠæŸ¥è¯¢ç”¨æˆ·--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findUserListByQueryVoUsername<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>queryVo<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.yang.pojo.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select * from user where username like '%${user.username}%' ;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>æµ‹è¯•</p></li></ol></li></ul> <p><strong>map ç±»å‹</strong></p> <ul><li><p>mapper æ¥å£æ–¹æ³•</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">getUserListByMap</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> userMap<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>é…ç½® mapper æ˜ å°„æ–‡ä»¶</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getUserListByMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Map<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		select * from user
		where userName like CONCAT ('%',#{userName},'%')
		and userRole = #{userRole}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>æµ‹è¯•</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;userName&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;sb&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;userRole&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//å…¶ä½™ä»£ç çœç•¥</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>é€šè¿‡#{mapçš„keyName}å³å¯è·å–ä¼ å…¥å€¼ã€‚</p></li></ul> <h3 id="resulttype-è¾“å‡ºæ˜ å°„"><a href="#resulttype-è¾“å‡ºæ˜ å°„" class="header-anchor">#</a> resultType è¾“å‡ºæ˜ å°„</h3> <ul><li>ç”¨äºæŸ¥è¯¢è¯­å¥ï¼Œå› ä¸ºå¢åˆ æ”¹æ–¹æ³•ä¸€èˆ¬æ²¡æœ‰éœ€è¦è¿”å›çš„æ•°æ®ã€‚</li></ul> <p><strong>Java ç®€å•ç±»å‹</strong></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--ç»Ÿè®¡ç”¨æˆ·è¡¨ä¸­çš„ç”¨æˆ·æ•°é‡--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>countUsers<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>int<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select count(*) from `user`;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>å¾ˆç®€å•ï¼Œç›´æ¥åœ¨ resultType å†™ä¸Šå¯¹åº”è¿”å›çš„ç®€å•ç±»å‹åå°±å¯ä»¥ã€‚</li></ul> <p><strong>pojo ç±»å‹</strong></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--æ ¹æ®ç”¨æˆ·è¡¨ä¸»é”®idå­—æ®µæŸ¥è¯¢ç”¨æˆ·æ•°æ®--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findUserListById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>int<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select * from user where id = #{id};
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--æ ¹æ®ç”¨æˆ·åç§°æ¨¡ç³ŠæŸ¥è¯¢ç”¨æˆ·--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findUserListByUsername<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>string<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select * from user where username like '%${value}%';
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>åªè¦æŸ¥è¯¢ç»“æœæ˜¯å®ä½“ç±»å¯¹è±¡ï¼Œæ— è®ºæŸ¥è¯¢å•æ¡æˆ–è€…å¤šæ¡æ•°æ®éƒ½ä½¿ç”¨å®ä½“ç±»åã€‚</li></ul> <h3 id="resultmap-è¾“å‡ºæ˜ å°„"><a href="#resultmap-è¾“å‡ºæ˜ å°„" class="header-anchor">#</a> resultMap è¾“å‡ºæ˜ å°„</h3> <ul><li>resultMap ç”¨äºé…ç½® sql è¯­å¥ä¸­å­—æ®µï¼ˆåˆ—ï¼‰çš„åç§°ï¼Œä¸ java å¯¹è±¡ä¸­å±æ€§åç§°çš„å¯¹åº”å…³ç³»ã€‚æœ¬è´¨ä¸Šè¿˜æ˜¯è¦æŠŠæ‰§è¡Œç»“æœæ˜ å°„åˆ° java å¯¹è±¡ä¸Šã€‚</li> <li>è¿™æ˜¯æŸ¥è¯¢æ ‡ç­¾ç‰¹æœ‰çš„å±æ€§ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå•ç‹¬çš„æ ‡ç­¾å…ƒç´ ã€‚</li> <li>ç”¨äºè”è¡¨æŸ¥è¯¢</li></ul> <p><strong>å½“æ•°æ®åº“çš„å­—æ®µåå’Œå¯¹åº”å®ä½“ç±»ä¸­çš„å±æ€§åä¸ä¸€è‡´æ—¶ï¼Œæœ‰ä¸¤ç§è§£å†³åŠæ³•ï¼š</strong></p> <ol><li><p>å¯ä»¥ç»™ Sql è¯­å¥ä¸­çš„å­—æ®µåå–åˆ«åã€‚ç»™æ•°æ®è¡¨ä¸­å­—æ®µå–ä¸Šä¸å¯¹åº” Java å¯¹è±¡ä¸­çš„å±æ€§åä¸€æ ·çš„åˆ«åã€‚</p> <ul><li><p>å®ä½“ç±»</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token class-name">String</span>  userRoleName<span class="token punctuation">;</span>	<span class="token comment">//ç”¨æˆ·è§’è‰²åç§°</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>æ˜ å°„æ–‡ä»¶</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getUserList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	select u.*,r.roleName as userRoleName from user u,role r 
	where u.userName like CONCAT (â€˜%â€™,#{userName}, â€˜%â€™)  
	and u.userRole = #{userRole} and u.userRole = r.id 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>	
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul></li> <li><p>ä½¿ç”¨ resultMap æ˜ å°„è‡ªå®šä¹‰ç»“æœï¼ˆæ¨èæ–¹å¼ï¼‰ã€‚</p> <ul><li><p>æ˜ å°„æ–‡ä»¶</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>User<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userList<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userCode<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userCode<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userName<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userRole<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userRole<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userRoleName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>roleName<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> ------ï¼ï¼ï¼ï¼
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getUserList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	select u.*,r.roleName from smbms_user u,smbms_role r 
	where u.userName like CONCAT (â€˜%â€™,#{userName}, â€˜%â€™)  
	and u.userRole = #{userRole} and u.userRole = r.id 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li></ul></li></ol> <p><strong>å†çœ‹ä¸€ä¸ªéœ€æ±‚ï¼šæŸ¥è¯¢å…¨éƒ¨ç”¨æˆ·æ•°æ®ï¼Œå¹¶ä¸”å…³è”æŸ¥è¯¢å‡ºç”¨æˆ·çš„æ‰€æœ‰è®¢å•æ•°æ®</strong></p> <ol><li><p>å£°æ˜ mapper æ¥å£æ–¹æ³•</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
* æŸ¥è¯¢å…¨éƒ¨ç”¨æˆ·æ•°æ®ï¼Œå¹¶ä¸”å…³è”æŸ¥è¯¢å‡ºç”¨æˆ·çš„æ‰€æœ‰è®¢å•æ•°æ®
* @return List&lt;User&gt;ç±»å‹ï¼Œè¿”å›æŸ¥è¯¢ç»“æœé›†ï¼šç”¨æˆ·å¯¹è±¡é›†åˆåˆ—è¡¨
*/</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAllUserMassageAndOrders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>é…ç½® mapper æ˜ å°„æ–‡ä»¶</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--æŸ¥è¯¢å…¨éƒ¨ç”¨æˆ·æ•°æ®ï¼Œå¹¶ä¸”å…³è”æŸ¥è¯¢å‡ºç”¨æˆ·çš„æ‰€æœ‰è®¢å•æ•°æ®--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findAllUserMassageAndOrdersResultMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>birthday<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>birthday<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sex<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sex<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>address<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>address<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>collection</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ordersList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ofType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>orders<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>oid<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>number<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>number<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>createtime<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>createtime<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user_id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userId<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>collection</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findAllUserMassageAndOrders<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findAllUserMassageAndOrdersResultMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    SELECT u.id, u.username, u.birthday, u.sex,u.address, o.id oid, o.number, o.createtime
    FROM `user` u
    LEFT JOIN orders o ON u.id = o.user_id
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div></li></ol> <ul><li>è§£ææ­¥éª¤ 2
<ul><li>åœ¨ select æ ‡ç­¾çš„å±æ€§ä¸­ï¼ŒresultMap å†™å…¥åº”ç”¨å¤–é¢ resultMap æ ‡ç­¾çš„ idã€‚</li> <li>åœ¨å¤–éƒ¨ resultMap æ ‡ç­¾ä¸­
<ul><li>å±æ€§
<ul><li>idï¼šæ ‡è¯†ç¬¦ï¼Œç”¨äºç»™ select æ ‡ç­¾çš„ resultMap å¼•å…¥ã€‚</li> <li>typeï¼šè¦æ˜ å°„çš„ java å¯¹è±¡ç±»å‹ã€‚</li></ul></li> <li>å­å…ƒç´ 
<ul><li>idï¼šä¸»è¡¨çš„ä¸»é”®ã€‚</li> <li>resultï¼šå…¶ä»–æ˜ å°„å­—æ®µã€‚</li> <li>collectionï¼šå…³è”çš„å¤–é”®ã€‚
<ul><li>å­å…ƒç´ 
<ul><li>è”è¡¨çš„ä¸»é”®ã€‚</li> <li>è”è¡¨çš„å…¶ä»–å­—æ®µ</li></ul></li></ul></li></ul></li></ul></li></ul></li></ul> <blockquote><p>æ³¨æ„ï¼šåœ¨ id å’Œ result æ ‡ç­¾ä¸­ï¼Œcolumn å¯¹åº”æ•°æ®åº“ä¸­çš„å­—æ®µåï¼Œproperty å¯¹åº”è¡¨å¯¹è±¡å®šä¹‰çš„å±æ€§åï¼ˆå°½é‡å–ä¸€æ ·ï¼‰ã€‚</p></blockquote> <h3 id="resultmap-è‡ªåŠ¨æ˜ å°„çº§åˆ«"><a href="#resultmap-è‡ªåŠ¨æ˜ å°„çº§åˆ«" class="header-anchor">#</a> resultMap è‡ªåŠ¨æ˜ å°„çº§åˆ«</h3> <ul><li><p>resultMap è‡ªåŠ¨æ˜ å°„åŒ¹é…å‰æï¼šå­—æ®µåä¸å±æ€§åä¸€è‡´ã€‚</p></li> <li><p>resultMap çš„è‡ªåŠ¨æ˜ å°„çº§åˆ«ï¼šautoMappingBehaviorã€‚</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>settings</span><span class="token punctuation">&gt;</span></span>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span>  <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>autoMappingBehavior<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>FULL<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>settings</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>PARTIALï¼ˆé»˜è®¤ï¼‰ï¼šè‡ªåŠ¨åŒ¹é…æ‰€æœ‰å±æ€§ï¼Œå†…éƒ¨åµŒå¥—é™¤å¤–ã€‚</li> <li>NONE è¡¨ç¤ºå–æ¶ˆè‡ªåŠ¨æ˜ å°„ã€‚</li> <li>FULL ä¼šè‡ªåŠ¨æ˜ å°„ä»»æ„å¤æ‚çš„ç»“æœé›†ï¼ˆåŒ…æ‹¬å†…éƒ¨åµŒå¥—ï¼‰ã€‚</li></ul></li></ul> <h2 id="è”è¡¨æŸ¥è¯¢"><a href="#è”è¡¨æŸ¥è¯¢" class="header-anchor">#</a> è”è¡¨æŸ¥è¯¢</h2> <h3 id="resultmap-é«˜çº§ç»“æœæ˜ å°„"><a href="#resultmap-é«˜çº§ç»“æœæ˜ å°„" class="header-anchor">#</a> resultMap é«˜çº§ç»“æœæ˜ å°„</h3> <ul><li>åœ¨è¿›è¡Œ MyBatis å¤šè¡¨è”æŸ¥æ—¶è¦å¯¹è¡¨ä¸è¡¨ä¹‹é—´çš„å…³è”å…³ç³»è¿›è¡Œåˆ†ç±»ï¼Œä¸€å…±æœ‰ä¸‰ç§ï¼š
<ol><li>ä¸€å¯¹ä¸€å…³è”å…³ç³»
<ul><li>æ¯”å¦‚äººå’Œèº«ä»½è¯çš„å…³ç³»ã€‚ä¸€ä¸ªäººåªèƒ½æœ‰ä¸€å¼ èº«ä»½è¯ï¼Œä¸€å¼ èº«ä»½è¯åªèƒ½å±äºä¸€ä¸ªäººã€‚</li></ul></li> <li>ä¸€å¯¹å¤šå…³è”å…³ç³»
<ul><li>æ¯”å¦‚äººå’Œè®¢å•çš„å…³ç³»ã€‚ä¸€ä¸ªäººå¯ä»¥æœ‰å¤šä¸ªè®¢å•ï¼Œä»äººåˆ°è®¢å•æ˜¯ã€ä¸€å¯¹å¤šã€‘ã€‚</li> <li>ä¸€ä¸ªè®¢å•åªèƒ½å±äºä¸€ä¸ªäººï¼Œä»è®¢å•åˆ°äººæ˜¯ã€ä¸€å¯¹ä¸€ã€‘ã€‚</li></ul></li> <li>å¤šå¯¹å¤šå…³è”å…³ç³»
<ul><li>æ¯”å¦‚åœ¨ä¸šåŠ¡ç³»ç»Ÿä¸­ï¼Œç”¨æˆ·å’Œè§’è‰²çš„å…³ç³»ã€‚ä¸€ä¸ªç”¨æˆ·æœ‰å¤šç§è§’è‰²ï¼Œä¸€ç§è§’è‰²å±äºå¤šä¸ªç”¨æˆ·ã€‚</li></ul></li></ol></li> <li>åœ¨ resultMap å…ƒç´ ä¸­æœ‰å¤šä¸ªå±æ€§ï¼š
<ul><li>idï¼šå¯¹åº”æ•°æ®è¡¨ä¸­çš„ä¸»é”®ï¼Œè®¾ç½®æ­¤å…ƒç´ å¯ä»¥æé«˜ MyBatis çš„æ€§èƒ½ã€‚</li> <li>resultï¼šæ˜ å°„åˆ° JavaBean çš„æŸä¸ªç®€å•ç±»å‹å±æ€§ï¼Œæ¯”å¦‚ intã€Stringã€‚</li> <li>associationï¼šæ˜ å°„åˆ° JavaBean çš„æŸä¸ªå¤æ‚ç±»å‹å±æ€§ï¼Œæ¯”å¦‚ JavaBean ç±»ã€‚
<ul><li>æŠ€å·§ï¼šä¸ºäº†æ–¹ä¾¿ç»´æŠ¤ï¼Œä½¿ç”¨è‡ªå®šä¹‰æ‰©å±•ç±»ï¼ˆç»§æ‰¿ä¸»ç±»ï¼‰ã€‚</li></ul></li> <li>collectionï¼šæ˜ å°„åˆ° JavaBean çš„æŸä¸ªå¤æ‚ç±»å‹å±æ€§ï¼Œæ¯”å¦‚é›†åˆã€‚</li></ul></li></ul> <h3 id="ä¸€å¯¹ä¸€å…³è”æŸ¥è¯¢-association"><a href="#ä¸€å¯¹ä¸€å…³è”æŸ¥è¯¢-association" class="header-anchor">#</a> ä¸€å¯¹ä¸€å…³è”æŸ¥è¯¢ï¼šassociation</h3> <p><strong>association</strong></p> <ul><li><p>å±æ€§</p> <ul><li>propertyï¼šè¦æ˜ å°„çš„å±æ€§åç§°ã€‚</li> <li>javaTypeï¼šè¦æ˜ å°„çš„å±æ€§ç±»å‹(å¿…é¡»è¦æŒ‡å®š)ã€‚</li></ul></li> <li><p>ç”¨æ³•</p> <ul><li><p>éœ€æ±‚ï¼šæŸ¥è¯¢å…¨éƒ¨è®¢å•æ•°æ®ï¼Œå¹¶ä¸”å…³è”æŸ¥è¯¢è®¢å•æ‰€å±çš„ç”¨æˆ·æ•°æ®ã€‚</p></li> <li><p>ä»£ç ï¼š</p> <ul><li><p>dao å±‚æ¥å£ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
 * æŸ¥è¯¢å…¨éƒ¨è®¢å•æ•°æ®ï¼Œå¹¶ä¸”å…³è”æŸ¥è¯¢è®¢å•æ‰€å±çš„ç”¨æˆ·æ•°æ®ã€‚
 * @return è¿”å›è®¢å•æ‰€å±çš„ç”¨æˆ·æ•°æ®åˆ—è¡¨
 */</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Orders</span><span class="token punctuation">&gt;</span></span> <span class="token function">findOrdersListAndUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>æ˜ å°„æ–‡ä»¶</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--æŸ¥è¯¢å…¨éƒ¨è®¢å•æ•°æ®ï¼Œå¹¶ä¸”å…³è”æŸ¥è¯¢è®¢å•æ‰€å±çš„ç”¨æˆ·æ•°æ®--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findOrdersListAndUserResultMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>orders<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user_id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userId<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>number<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>number<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>createtime<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>createtime<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>note<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>note<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>association</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>address<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>address<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>association</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findOrdersListAndUser<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findOrdersListAndUserResultMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    SELECT o.*,u.username,u.address
    FROM orders o
	LEFT JOIN `user` u
	ON o.user_id = u.id;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div></li> <li><p>è§£æï¼šåœ¨æ˜ å°„æ–‡ä»¶ä¸­</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;association property=&quot;user&quot; javaType=&quot;user&quot;&gt;    &lt;id column=&quot;id&quot; property=&quot;id&quot;/&gt;    &lt;result column=&quot;username&quot; property=&quot;username&quot;/&gt;    &lt;result column=&quot;address&quot; property=&quot;address&quot;/&gt;&lt;/association&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><p>è¿™æ®µä»£ç é‡Œ<code>&lt;association property=&quot;user&quot; javaType=&quot;user&quot;&gt;</code>ï¼š</p> <ul><li>property ä¾æ—§æ˜¯ orders å¯¹è±¡çš„å±æ€§åã€‚</li> <li>javaType æ˜¯ property çš„å±æ€§åå¯¹åº”çš„ç±»å‹å Userï¼ˆé…ç½®åˆ«ååå¯å†™ userï¼‰ã€‚</li> <li>association å­å…ƒç´ é‡Œçš„ property æ‰æ˜¯ user å¯¹è±¡é‡Œçš„å±æ€§åï¼Œç”¨æ³•å’Œæ™®é€šæ˜ å°„ä¸€æ ·ã€‚</li></ul></li></ul></li></ul></li></ul></li></ul> <h3 id="ä¸€å¯¹å¤šå…³è”æŸ¥è¯¢-collection"><a href="#ä¸€å¯¹å¤šå…³è”æŸ¥è¯¢-collection" class="header-anchor">#</a> ä¸€å¯¹å¤šå…³è”æŸ¥è¯¢ï¼šcollection</h3> <p><strong>collection</strong></p> <ul><li><p>å±æ€§</p> <ul><li>propertyï¼šè¦æ˜ å°„çš„å±æ€§åç§°ã€‚</li> <li>javaTypeï¼šè¦æ˜ å°„çš„å±æ€§ç±»å‹ï¼ˆå¯ä»¥æŒ‡å®šï¼Œå¯ä»¥ä¸æŒ‡å®šï¼Œå»ºè®®éƒ½æŒ‡å®šï¼‰ã€‚</li> <li>ofTypeï¼šé›†åˆä¸­å­˜æ”¾çš„ç±»å‹ï¼ˆå¿…é¡»è¦æŒ‡å®šï¼‰ã€‚</li></ul></li> <li><p>ç”¨æ³•ï¼šä¸ association ç”¨æ³•æå…¶ç±»ä¼¼ï¼Œåªæ˜¯å°†å†…åµŒå¯¹è±¡æ¢æˆé›†åˆã€‚</p> <ul><li><p>éœ€æ±‚ï¼šæŸ¥è¯¢å…¨éƒ¨ç”¨æˆ·æ•°æ®ï¼Œå¹¶ä¸”å…³è”æŸ¥è¯¢å‡ºç”¨æˆ·çš„æ‰€æœ‰è®¢å•æ•°æ®ã€‚</p></li> <li><p>ä»£ç ï¼š</p> <ul><li><p>dao å±‚æ¥å£ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/** * æŸ¥è¯¢å…¨éƒ¨ç”¨æˆ·æ•°æ®ï¼Œå¹¶ä¸”å…³è”æŸ¥è¯¢å‡ºç”¨æˆ·çš„æ‰€æœ‰è®¢å•æ•°æ® * @return List&lt;User&gt;ç±»å‹ï¼Œè¿”å›æŸ¥è¯¢ç»“æœé›†ï¼šç”¨æˆ·å¯¹è±¡é›†åˆåˆ—è¡¨ */</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAllUserMassageAndOrders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>æ˜ å°„æ–‡ä»¶ï¼š</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--æŸ¥è¯¢å…¨éƒ¨ç”¨æˆ·æ•°æ®ï¼Œå¹¶ä¸”å…³è”æŸ¥è¯¢å‡ºç”¨æˆ·çš„æ‰€æœ‰è®¢å•æ•°æ®--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findAllUserMassageAndOrdersResultMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>    
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>    
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>    
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>birthday<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>birthday<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>    
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sex<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sex<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>    
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>address<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>address<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>    
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>collection</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ordersList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ofType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>orders<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>        
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>oid<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>        
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>number<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>number<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>        
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>createtime<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>createtime<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>        
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user_id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userId<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>    
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>collection</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findAllUserMassageAndOrders<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findAllUserMassageAndOrdersResultMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  SELECT u.id, u.username, u.birthday, u.sex,
  u.address, o.id oid, o.number, o.createtime
  FROM `user` u    
  LEFT JOIN orders o ON u.id = o.user_id
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div></li> <li><p>è§£æï¼šåœ¨æ˜ å°„æ–‡ä»¶ä¸­</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>collection</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ordersList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ofType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>orders<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>oid<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>number<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>number<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>createtime<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>createtime<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user_id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userId<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>collection</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li><p>è¿™æ®µä»£ç é‡Œ<code>&lt;collection property=&quot;ordersList&quot; javaType=&quot;list&quot; ofType=&quot;orders&quot;&gt;</code>ï¼š</p> <ul><li>property ä¾æ—§æ˜¯ user å¯¹è±¡çš„å±æ€§åã€‚</li> <li>javaType æ˜¯ property çš„ï¼ˆuser å¯¹è±¡çš„å±æ€§åï¼‰å¯¹åº”çš„é›†åˆç±»å‹å Listï¼ˆé…ç½®åˆ«ååå¯å†™ listï¼‰ã€‚</li> <li>ofType æ˜¯ List ä¸­å­˜æ”¾çš„æ•°æ®ç±»å‹ Ordersï¼ˆé…ç½®åˆ«ååå¯å†™ ordersï¼‰ã€‚</li> <li>collection å­å…ƒç´ é‡Œçš„ property æ‰æ˜¯ orders å¯¹è±¡é‡Œçš„å±æ€§åï¼Œç”¨æ³•å’Œæ™®é€šæ˜ å°„ä¸€æ ·ã€‚</li></ul></li></ul></li></ul></li></ul></li></ul> <h3 id="_6-4-å¤šå¯¹å¤šå…³è”æŸ¥è¯¢"><a href="#_6-4-å¤šå¯¹å¤šå…³è”æŸ¥è¯¢" class="header-anchor">#</a> 6.4 å¤šå¯¹å¤šå…³è”æŸ¥è¯¢</h3> <p><strong>å¤šå¯¹å¤šå…³è”å…³ç³»çš„æŸ¥è¯¢ï¼Œå¯ä»¥é€šè¿‡ä¸­é—´è¡¨çœ‹æˆä¸¤ä¸ªåŒå‘çš„ä¸€å¯¹å¤šå…³è”å…³ç³»æŸ¥è¯¢ã€‚</strong></p> <ul><li><p>éœ€æ±‚æ¡ˆä¾‹ï¼šå®ç°ç”¨æˆ·åˆ°è§’è‰²çš„å¤šå¯¹å¤šå…³è”æŸ¥è¯¢</p> <ul><li><p>ç°æœ‰è§’è‰²å®ä½“ç±»å±æ€§:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token class-name">Integer</span> roleId<span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token class-name">String</span> roleName<span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token class-name">String</span> roleDetail<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>ç”¨æˆ·å®ä½“ç±»å±æ€§ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>         <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Date</span> birthday<span class="token punctuation">;</span>      <span class="token keyword">private</span> <span class="token class-name">String</span> sex<span class="token punctuation">;</span>         <span class="token keyword">private</span> <span class="token class-name">String</span> address<span class="token punctuation">;</span>     <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Orders</span><span class="token punctuation">&gt;</span></span> ordersList<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li> <li><p>å®ç°åˆ†æï¼š</p> <ul><li><p>ç”±äºä¸€ä¸ªç”¨æˆ·æœ‰å¤šç§è§’è‰²ï¼Œä¸€ç§è§’è‰²å±äºå¤šä¸ªç”¨æˆ·ã€‚å¯ä»¥åˆ›å»ºä¸€å¼  â€œç”¨æˆ·_è§’è‰²â€ ä¸­é—´è¡¨æ¥å¯¹ä¸¤å¼ è¡¨å»ºç«‹ä¸€å¯¹å¤šçš„å…³è”å…³ç³»ã€‚</p></li> <li><p>åˆ›å»ºä¸­é—´è¡¨ï¼š</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>/*åˆ›å»ºç”¨æˆ·è§’è‰²ä¸­é—´è¡¨*/CREATE TABLE `user_role` (	`user_id` bigint(32) NOT NULL  COMMENT 'ç”¨æˆ·id',	`role_id` bigint(32) NOT NULL  COMMENT 'è§’è‰²id',	PRIMARY KEY (`user_id`,`role_id`))ENGINE=InnoDB  DEFAULT CHARSET=utf8;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>åœ¨ user è¡¨ä¸­æ·»åŠ å±æ€§ç«‹è”ç³»</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Role</span><span class="token punctuation">&gt;</span></span> roleList<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>dao å±‚æ¥å£</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/** * å®ç°ç”¨æˆ·åˆ°è§’è‰²çš„å¤šå¯¹å¤šå…³è”æŸ¥è¯¢ * @return List&lt;User&gt;ç±»å‹ï¼Œè¿”å›æŸ¥è¯¢ç»“æœé›†ï¼šç”¨æˆ·å¯¹è±¡é›†åˆåˆ—è¡¨ */</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">findUserAndRole</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>æ˜ å°„æ–‡ä»¶</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--å®ç°ç”¨æˆ·åˆ°è§’è‰²çš„å¤šå¯¹å¤šå…³è”æŸ¥è¯¢--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findUserAndRoleResultMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>birthday<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>birthday<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sex<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sex<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>address<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>address<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>collection</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>roleList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ofType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>role<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>role_id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>roleId<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>role_name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>roleName<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>collection</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findUserAndRole<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findUserAndRoleResultMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    SELECT u.id, u.username, u.birthday,u.sex, u.address, r.role_id, r.role_name
    FROM `user` u
    inner join `user_role` ur
    on u.id = ur.user_id
    inner join `role` r
    on r.role_id = ur.role_id;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div></li></ul></li> <li><p>æ¡ˆä¾‹å°ç»“ï¼šä½¿ç”¨ä¸­é—´è¡¨è™½ç„¶æœ‰åŒå‘ä¸€å¯¹å¤šçš„å…³è”å…³ç³»ï¼Œä½†æ˜¯åªéœ€è¦ä¸€æ¬¡ collection çš„æ“ä½œï¼Œåˆ›å»ºä¸­é—´è¡¨æ˜¯ä¸ºäº†ä¾¿äº SQL è¯­å¥çš„ç¼–å†™ï¼Œä½¿ç”¨ inner join è”è¡¨æŸ¥è¯¢ï¼ï¼ï¼</p></li></ul> <h2 id="mybatis-åŠ¨æ€-sql"><a href="#mybatis-åŠ¨æ€-sql" class="header-anchor">#</a> Mybatis åŠ¨æ€ SQL</h2> <ul><li>è¿è¡Œæ—¶çš„ sqlï¼Œæ ¹æ®ä¼ å…¥çš„å‚æ•°æƒ…å†µï¼Œå†³å®šå¯¹æœ€ç»ˆæ‰§è¡Œçš„ sql è¯­å¥ã€‚</li> <li>ä¼ ç»Ÿçš„ä½¿ç”¨ JDBC çš„æ–¹æ³•ï¼Œåœ¨ç»„åˆå¤æ‚çš„ SQL è¯­å¥çš„æ—¶å€™ï¼Œéœ€è¦å»æ‹¼æ¥ï¼Œç¨ä¸æ³¨æ„å“ªæ€•å°‘äº†ä¸ªç©ºæ ¼ï¼Œéƒ½ä¼šå¯¼è‡´é”™è¯¯ã€‚Mybatis çš„åŠ¨æ€ SQL åŠŸèƒ½æ­£æ˜¯ä¸ºäº†è§£å†³è¿™ç§é—®é¢˜ï¼Œå…¶é€šè¿‡ ifï¼Œchoose ç­‰æ ‡ç­¾ï¼Œå¯ç»„åˆæˆéå¸¸çµæ´»çš„ SQL è¯­å¥ï¼Œä»è€Œæé«˜å¼€å‘äººå‘˜çš„æ•ˆç‡ã€‚</li></ul> <p><strong>ä¸‰ä¸ªé—®é¢˜</strong></p> <ol><li>ä»€ä¹ˆæ˜¯åŠ¨æ€ sqlï¼Ÿ
<ul><li>åŠ¨æ€ç”Ÿæˆçš„ sql è¯­å¥ã€‚</li></ul></li> <li>ä»€ä¹ˆæ—¶å€™ç”¨åŠ¨æ€ sqlï¼Ÿ
<ul><li>å½“éœ€è¦æŸ¥è¯¢çš„æ¡ä»¶ä¸ç¡®å®šæ—¶ä½¿ç”¨åŠ¨æ€ sqlã€‚</li></ul></li> <li>åŠ¨æ€ sql æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ
<ul><li>ç®€åŒ– sql è¯­å¥çš„ç¼–å†™ã€‚</li></ul></li></ol> <h3 id="if"><a href="#if" class="header-anchor">#</a> if</h3> <p><strong>å®ç°ç®€å•æ¡ä»¶é€‰æ‹©</strong></p> <ul><li>ç¤ºä¾‹ï¼š</li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getUserListByUserNameAndUserRole<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  select * from user	where userName like CONCAT ('%',#{userName},'%')	and userRole = #{userRole}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>å½“æŸ¥è¯¢æ¡ä»¶ userName æˆ– userRole æœ‰ä¸€ä¸ªä¸ºç©ºæ—¶ï¼Œåˆ™ä¼šæŠ¥é”™ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨ if æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°†ä»£ç æ”¹ï¼š</li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getUserListByUserNameAndUserRole<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>	
  select * from user where	
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userName != null and userName != ''<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>		
    userName like CONCAT ('%',#{userName},'%')	
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>	
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userRole != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>		
    and userRole = #{userRole}	
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li><p>å½“ userRole ä¸ºç©ºæ—¶ï¼Œåˆ™ä¸ä¼šå°† and userRole = #{userRole} æ‹¼æ¥è‡³ sql è¯­å¥ä¸­ã€‚</p></li> <li><p>ä½†æ˜¯å¦‚æœ userName æ¡ä»¶ä¸ºç©ºï¼Œé‚£ä¹ˆæœ€ç»ˆçš„ sql è¯­å¥ä¼šå¤šäº†ä¸€ä¸ª andï¼Œé‚£å¯ä»¥åœ¨ where åé¢åŠ ä¸Šä¸€ä¸ªæ’ç­‰å¼ 1=1ã€‚ä½†æ˜¯åœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¸å»ºè®®ç”¨ 1=1ï¼Œå› ä¸ºå¤šä¸€ä¸ªåˆ¤æ–­ä¼šå¤šæ¶ˆè€—èµ„æºï¼Œé‚£ä¹ˆå°±è¦ç”¨åˆ°ä¸‹ä¸€ä¸ªåŠ¨æ€ sql å…ƒç´  whereã€‚</p></li></ul> <h3 id="where"><a href="#where" class="header-anchor">#</a> where</h3> <p><strong>ç®€åŒ– SQL è¯­å¥ä¸­ where æ¡ä»¶åˆ¤æ–­ï¼Œæ™ºèƒ½å¤„ç† and å’Œ or</strong></p> <ul><li>å°†ä¸Šè¿°ä»£ç æ”¹ä¸ºï¼š</li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getUserListByUserNameAndUserRole<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>	
  select * from user 	
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>where</span><span class="token punctuation">&gt;</span></span>		
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userName != null and userName != ''<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>			
      and userName like CONCAT ('%',#{userName},'%')		
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>		
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userRole != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>			
      and userRole = #{userRole}		
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>	
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>where</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li>åœ¨ where ä¸­ï¼Œè‡ªåŠ¨è¯†åˆ«æ ‡ç­¾ä¸­æ˜¯å¦æœ‰è¿”å›å€¼ï¼Œå®ƒå¯ä»¥æ™ºèƒ½å¿½ç•¥ç¦»è‡ªå·±æœ€è¿‘çš„ä¸€ä¸ª and/orï¼Œæ‰€ä»¥åœ¨æ¯ä¸€ä¸ª if é‡Œé¢éƒ½å¯ä»¥å†™ä¸Š andã€‚å½“ userName ä¸ºç©ºæ—¶ï¼Œsql è¯­å¥ä¸ºï¼š<code>select * from user where userRole = #{userRole}</code>ï¼Œå½“ä¸¤ä¸ªå‚æ•°ä¸ºç©ºæ˜¯ï¼Œå®ƒå¯ä»¥è¿ where ä¹Ÿå¿½ç•¥ï¼ŒæŸ¥è¯¢æ‰€æœ‰ï¼Œsql è¯­å¥ä¸ºï¼š<code>select * from user</code>ã€‚</li></ul> <h3 id="set"><a href="#set" class="header-anchor">#</a> set</h3> <p><strong>setï¼šæ›´è¡¨æ•°æ®æ—¶ï¼Œè‹¥æŸä¸ªå‚æ•°ä¸º null æ—¶ï¼Œä¼šå¯¼è‡´æ›´æ–°é”™è¯¯ï¼Œè¿™ä¸ªæ—¶å€™å°±è¦ç”¨åˆ° setã€‚</strong></p> <ul><li>å°†ä¸Šè¿°ä»£ç æ”¹ä¸ºï¼š</li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>update<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>	
  update user	
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>set</span><span class="token punctuation">&gt;</span></span>		
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userPassword!=null and userPassword!=''<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>		
      userPassword=#{userPassword},		
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>		
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userName!=null and userName!=''<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>		
      userPassword=#{userPassword},	
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>	
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>set</span><span class="token punctuation">&gt;</span></span>	
  where id=#{id}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ul><li>åœ¨ set ä¸­ï¼Œä»–å’Œ where ä¸€æ ·å¯ä»¥æ™ºèƒ½å¿½ç•¥æœ€åä¸€ä¸ªâ€œ,â€ï¼Œæ‰€ä»¥åœ¨æ¯ä¸€ä¸ª if é‡Œé¢æœ€åéƒ½å¯ä»¥å†™ä¸Šâ€œ,â€ã€‚å½“ userPassword ä¸ºç©ºæ—¶ï¼Œsql è¯­å¥ä¸ºï¼šupdate smbms_user set userPassword=#{userPassword} where id=#{id}ã€‚</li></ul> <h3 id="trim"><a href="#trim" class="header-anchor">#</a> trim</h3> <p><strong>trimï¼šåœ¨trimä¸­ï¼Œå®ƒä¹Ÿèƒ½è‡ªåŠ¨è¯†åˆ«æ ‡ç­¾ä¸­æ˜¯å¦æœ‰è¿”å›å€¼</strong></p> <ul><li><p>å±æ€§</p> <ul><li>prefixï¼šå‰ç¼€</li> <li>suffixï¼šåç¼€</li> <li>prefixOverridesï¼šæ‰€è¦æ™ºèƒ½å¿½ç•¥çš„é¦–éƒ¨å†…å®¹</li> <li>suffixOverridesï¼šæ‰€è¦æ™ºèƒ½å¿½ç•¥çš„å°¾éƒ¨å†…å®¹</li></ul></li> <li><p>å°†æŸ¥è¯¢ä»£ç ï¼ˆif+whereï¼‰æ”¹ä¸ºï¼š</p></li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getUserListByUserNameAndRoleName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>	
  select u.* from user u 
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>trim</span> <span class="token attr-name">prefix</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>where<span class="token punctuation">&quot;</span></span> <span class="token attr-name">prefixOverrides</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>and | or<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>	
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userName != null and userName != ''<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>	
      and userName like CONCAT ('%',#{userName},'%')	
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>	
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userRole != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>		
      and userRole = #{userRole}	
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>	
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>trim</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li>å°†æ›´æ–°ä»£ç ï¼ˆif+setï¼‰æ”¹ä¸ºï¼š</li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>update<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>	
  update user 	
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>trim</span> <span class="token attr-name">prefix</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>set<span class="token punctuation">&quot;</span></span> <span class="token attr-name">suffixOverrides</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>,<span class="token punctuation">&quot;</span></span> <span class="token attr-name">suffix</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>where userName=#{userName}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>	
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userCode != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      userCode=#{userCode},
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>		
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userPassword != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      userPassword=#{userPassword},
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>	
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>trim</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><blockquote><p>æç¤ºï¼šä½¿ç”¨ if+trim å¯ä»¥ä»£æ›¿ if+where/if+setï¼Œæ›´åŠ çµæ´»å¤„ç† where/set/and|orã€‚</p></blockquote> <h3 id="foreach"><a href="#foreach" class="header-anchor">#</a> foreach</h3> <p><strong>foreachï¼šè¿­ä»£ä¸€ä¸ªé›†åˆï¼Œé€šå¸¸ç”¨äº in æ¡ä»¶</strong></p> <ul><li>å±æ€§
<ul><li>itemï¼šè¡¨ç¤ºé›†åˆä¸­æ¯ä¸€ä¸ªå…ƒç´ è¿›è¡Œè¿­ä»£æ—¶çš„åˆ«åã€‚
<ul><li>æ¯”å¦‚ item ä¸º valueï¼Œé‚£ä¹ˆï¼Œæ¯æ¬¡è·å–çš„éƒ½ä½¿ç”¨ #{value} å³å¯ã€‚</li></ul></li> <li>indexï¼šæŒ‡å®šä¸€ä¸ªåå­—ï¼Œç”¨äºè¡¨ç¤ºåœ¨è¿­ä»£è¿‡ç¨‹ä¸­ï¼Œæ¯æ¬¡è¿­ä»£åˆ°çš„ä½ç½®ï¼Œä¸€èˆ¬å¾ˆå°‘ä½¿ç”¨è¿™ä¸ªã€‚</li> <li>collectionï¼ˆå¿…é¡»æŒ‡å®šï¼‰ï¼šè¡¨ç¤ºå¦‚ä½•æ¥å¾—åˆ°è¿™ä¸ªé›†åˆï¼Œå®ƒçš„å€¼æœ‰ï¼š
<ul><li>listï¼šå¦‚æœä¼ å…¥çš„ç›´æ¥ä¸ºä¸€ä¸ª Listï¼Œé‚£ä¹ˆ collection å€¼å°±ä¸º listã€‚</li> <li>arrayï¼šå¦‚æœç›´æ¥ä¼ å…¥çš„ä¸ºä¸€ä¸ª array ä¸å¯å˜æ•°ç»„ï¼Œé‚£ä¹ˆ collection å€¼å°±ä¸º arrayã€‚</li> <li>map-keyï¼šå¦‚æœä¼ å…¥å¤šä¸ªå‚æ•°ï¼Œè¦æŠŠå‚æ•°å°è£…æˆ Mapï¼Œcollection å€¼ä¸ºéœ€è¦éå†çš„ Map çš„ key å€¼ã€‚</li></ul></li> <li>openï¼šè¡¨ç¤ºè¯¥è¯­å¥ä»¥ä»€ä¹ˆå¼€å§‹ï¼Œå¯¹äº in è€Œè¨€ï¼Œé‚£ä¹ˆæ˜¯ä»¥â€œ(â€å¼€å§‹ã€‚</li> <li>separatorï¼šè¡¨ç¤ºåœ¨æ¯æ¬¡è¿›è¡Œè¿­ä»£ä¹‹é—´ä»¥ä»€ä¹ˆç¬¦å·ä½œä¸ºåˆ†éš”ç¬¦ï¼Œå¯¹äº in è€Œè¨€ï¼Œé‚£ä¹ˆæ˜¯ä»¥â€œ,â€ä¸ºåˆ†éš”ç¬¦ã€‚</li> <li>closeï¼šè¡¨ç¤ºä»¥ä»€ä¹ˆç»“æŸï¼Œå¯¹äº in è€Œè¨€ï¼Œé‚£ä¹ˆæ˜¯ä»¥â€œ)â€ç»“æŸã€‚</li></ul></li></ul> <p><strong>collection ä¸º list</strong></p> <ul><li><p>ç¤ºä¾‹ï¼š</p> <ul><li><p>dao å±‚æ¥å£ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">getUserByRoleId_foreach_list</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> roleList<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>mapper æ˜ å°„æ–‡ä»¶ï¼š</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getUserByRoleId_foreach_list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userMypByrole<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>	
  select * from user	where userRole in	
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>foreach</span> <span class="token attr-name">collection</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>roleList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">open</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(<span class="token punctuation">&quot;</span></span> <span class="token attr-name">separator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>,<span class="token punctuation">&quot;</span></span> <span class="token attr-name">close</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>	
    #{roleList}	
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>foreach</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul></li></ul> <p><strong>collection ä¸º array</strong></p> <ul><li><p>ç¤ºä¾‹ï¼š</p> <ul><li><p>dao å±‚æ¥å£</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">getUserByRoleId_foreach_array</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span> roleids<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>mapper æ˜ å°„æ–‡ä»¶ï¼š</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getUserByRoleId_foreach_array<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userMypByrole<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	select * from user
	where userRole in
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>foreach</span> <span class="token attr-name">collection</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>array<span class="token punctuation">&quot;</span></span> <span class="token attr-name">item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>roleIds<span class="token punctuation">&quot;</span></span> <span class="token attr-name">open</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(<span class="token punctuation">&quot;</span></span> <span class="token attr-name">separator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>,<span class="token punctuation">&quot;</span></span> <span class="token attr-name">close</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		#{roleIds}
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>foreach</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ul></li></ul> <p><strong>collection ä¸º map-key</strong></p> <ul><li><p>ç¤ºä¾‹ï¼š</p> <ul><li><p>dao å±‚æ¥å£ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">getUserByConditionMap</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> cond<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>mapper æ˜ å°„æ–‡ä»¶ï¼š</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getUserByConditionMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userMypByrole<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	select * from user
	where gender = #{gender}
	and userRole in
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>foreach</span> <span class="token attr-name">collection</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>roleId<span class="token punctuation">&quot;</span></span> <span class="token attr-name">item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>roleMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">open</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(<span class="token punctuation">&quot;</span></span> <span class="token attr-name">separator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>,<span class="token punctuation">&quot;</span></span> <span class="token attr-name">close</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--collection å†™ä¸Š key çš„å€¼ã€‚--&gt;</span>
		#{roleMap}
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>foreach</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ul></li></ul> <blockquote><p>æ³¨æ„ï¼š</p> <ol><li>item çš„å€¼å’Œæ ‡ç­¾é‡Œçš„å‚æ•°å¿…é¡»ä¸€è‡´ã€‚</li> <li>collection çš„å€¼å¦‚æœæ˜¯å‚æ•°ç±»å‹æ•°ç»„æˆ–è€… list é›†åˆé‚£åˆ†åˆ«å¡« array æˆ–è€… listï¼Œå¦‚æœæ˜¯ Map-key ç±»å‹åˆ™å¡«å…¥éœ€è¦éå†çš„ Map çš„ key å€¼ã€‚</li> <li>å‚æ•°åç§°ä¸èƒ½ä½¿ç”¨ UserMepper.java ä¸­æ–¹æ³•å‚æ•°é‡Œçš„ @Param æ³¨è§£åœ¨ UserMepper.java ä¸­å‚æ•°ä¸ºé›†åˆã€æ•°ç»„ã€Map æ—¶ä¹Ÿä¸éœ€å†™å…¥ @Param æ³¨è§£ã€‚</li> <li>item ç›¸å½“äºç»™å‚æ•°å–äº†åˆ«åï¼Œæ‰€ä»¥æ ‡ç­¾é‡Œçš„å‚æ•°å¿…é¡»ä¸ item å–çš„åˆ«åä¸€è‡´ï¼Œæ‰€ä»¥ä¹Ÿä¸éœ€è¦ @Param æ³¨è§£ã€‚</li></ol></blockquote> <h3 id="choose"><a href="#choose" class="header-anchor">#</a> choose</h3> <p><strong>choose(whenã€otherwise)ï¼šä¸ choose å’Œ Java é‡Œçš„ switch ç”¨æ³•ç›¸ä¼¼ï¼Œä¸ JSTL é‡Œçš„ choose ä½œç”¨å’Œç”¨æ³•ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚</strong></p> <ul><li><p>å½“å¤šå‚å…¥å‚æ—¶ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰å‚æ•°éƒ½æœ‰å€¼çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨ chooseã€‚</p></li> <li><p>ç¤ºä¾‹ï¼š</p> <ul><li><p>dao å±‚æ¥å£ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">getUserList_choose</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;userName&quot;</span><span class="token punctuation">)</span><span class="token class-name">String</span> userName<span class="token punctuation">,</span>
                                     <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;userRole&quot;</span><span class="token punctuation">)</span><span class="token class-name">Integer</span> roleId<span class="token punctuation">,</span>
                                     <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;userCode&quot;</span><span class="token punctuation">)</span><span class="token class-name">String</span> userCode<span class="token punctuation">,</span>
                                     <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;creationDate&quot;</span><span class="token punctuation">)</span><span class="token class-name">Date</span> creationDate<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>mapper æ˜ å°„æ–‡ä»¶:</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getUserList_choose<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>	
  select * from user where 1=1	
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>choose</span><span class="token punctuation">&gt;</span></span>		
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userName != null and userName != ''<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>		
      and userName like CONCAT ('%',#{userName},'%')		
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>when</span><span class="token punctuation">&gt;</span></span>	
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userCode != null and userCode != ''<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>		
      and userCode like CONCAT ('%',#{userCode},'%')	
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>when</span><span class="token punctuation">&gt;</span></span>		
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userRole != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>		
      and userRole=#{userRole}	
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>when</span><span class="token punctuation">&gt;</span></span>	
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>otherwise</span><span class="token punctuation">&gt;</span></span>		
      <span class="token comment">&lt;!-- and YEAR(creationDate) = YEAR(NOW()) --&gt;</span>		
      and YEAR(creationDate) = YEAR(#{creationDate})	
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>otherwise</span><span class="token punctuation">&gt;</span></span>	
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>choose</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></li></ul></li> <li><p>ç”¨æ³•æœ‰ç‚¹ç±»ä¼¼äºä¹‹å‰çš„ whereã€‚</p></li> <li><p>åœ¨ UserMapper.xml ä¸­ï¼Œå½“æ»¡è¶³ when é‡Œçš„ test æ¡ä»¶æ—¶ï¼Œåˆ™è¿›å…¥ when æ ‡ç­¾ä¸­ï¼Œå½“ä¸æ»¡è¶³æ‰€æœ‰ when çš„ test æ¡ä»¶æ—¶ï¼Œè¿›å…¥ otherwise æ ‡ç­¾ä¸­ã€‚</p></li> <li><p>è¿™å°±ç±»ä¼¼äºï¼š</p> <ul><li>chooseï¼šç›¸å½“äº java çš„ switchã€‚</li> <li>whenï¼šç›¸å½“äº java çš„ switch é‡Œçš„ caseï¼Œæœ‰æ‰€åŒºåˆ«çš„æ˜¯ when å®ƒè‡ªå¸¦ &quot;break&quot;ï¼Œæ„æ€æ˜¯ç”±ä¸Šè‡³ä¸‹ä¸€æ—¦æ»¡è¶³ç¬¬ä¸€ä¸ª when é‡Œçš„ test æ¡ä»¶å®ƒå°†æŠŠå½“å‰when é‡Œçš„ sql è¯­å¥æ‹¼æ¥è‡³ selset é‡Œå¹¶è·³å‡º choose æ ‡ç­¾ä¸å†åˆ¤æ–­ä¸‹é¢çš„æ¡ä»¶ã€‚</li> <li>otherwiseï¼šç›¸å½“äº java çš„ switch é‡Œçš„ defaultã€‚</li></ul></li> <li><p>æ ¹æ®ä¹‹å‰ç”¨åˆ°çš„ where å’Œ trimï¼Œå¯å°†ä»£ç  UserMapper.xml ä¼˜åŒ–ä¸ºï¼š</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getUserList_choose<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>	select * from user 	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>where</span><span class="token punctuation">&gt;</span></span>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>choose</span><span class="token punctuation">&gt;</span></span>			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userName != null and userName != ''<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>				and userName like CONCAT ('%',#{userName},'%')			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>when</span><span class="token punctuation">&gt;</span></span>			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userCode != null and userCode != ''<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>				and userCode like CONCAT ('%',#{userCode},'%')			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>when</span><span class="token punctuation">&gt;</span></span>			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userRole != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>				and userRole=#{userRole}			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>when</span><span class="token punctuation">&gt;</span></span>			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>otherwise</span><span class="token punctuation">&gt;</span></span>				and YEAR(creationDate) = YEAR(#{creationDate})			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>otherwise</span><span class="token punctuation">&gt;</span></span>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>choose</span><span class="token punctuation">&gt;</span></span>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>where</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>æˆ–è€…ï¼ˆæ¨èï¼‰ï¼š</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getUserList_choose<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	select * from user 
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>trim</span> <span class="token attr-name">prefix</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>where<span class="token punctuation">&quot;</span></span> <span class="token attr-name">prefixOverrides</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>and | or<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>choose</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userName != null and userName != ''<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
				and userName like CONCAT ('%',#{userName},'%')
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>when</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userCode != null and userCode != ''<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
				and userCode like CONCAT ('%',#{userCode},'%')
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>when</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userRole != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
				and userRole=#{userRole}
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>when</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>otherwise</span><span class="token punctuation">&gt;</span></span>
				and YEAR(creationDate) = YEAR(#{creationDate})
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>otherwise</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>choose</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>trim</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div></li></ul> <h3 id="sqlã€include"><a href="#sqlã€include" class="header-anchor">#</a> sqlã€include</h3> <p><strong>sqlï¼šæå–å…¬å…±çš„ sql è¯­å¥ç‰‡æ®µã€‚</strong></p> <p><strong>includeï¼šæ ‡ç­¾ç”¨äºå¼•ç”¨sqlæ ‡ç­¾ã€‚</strong></p> <ul><li>ä¸€èˆ¬ç”¨äºå¤šä¸ª SQL è¯­å¥ä½¿ç”¨çš„é‡å¤ä»£ç ç‰‡æ®µï¼ŒæŠ½å‡ºæ¥ç”¨ <code>&lt;sql&gt;é‡å¤çš„sqlè¯­å¥&lt;/sql&gt;</code>åŒ…è£…ï¼Œç„¶ååœ¨ç”¨ include æ ‡ç­¾å¼•ç”¨ã€‚</li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--ç”¨æˆ·è¡¨æ‰€æœ‰å­—æ®µï¼Œå¼•ç”¨æ—¶æ³¨æ„é…ä¸Šåˆ«å--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sql</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userAllColumn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    u.id,u.username,u.password,u.email,u.phoneNum,u.status
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sql</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findUserList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    SELECT <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">refid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userAllColumn<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> FROM `user` u
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>æ‰€æœ‰ä¿¡æ¯çš„æŸ¥è¯¢åº”è¯¥è¿˜æ˜¯ç”¨çš„æ¯”è¾ƒå¤šçš„ï¼Œè€Œä¸”åœ¨å®é™…å¼€å‘ä¸­å°½é‡ä¸è¦ä½¿ç”¨ * æ¥æ›¿ä»£æ‰€æœ‰å­—æ®µï¼Œä¼šå½±å“ mybatis çš„æ€§èƒ½ã€‚</li></ul> <h2 id="äº‹åŠ¡æ§åˆ¶"><a href="#äº‹åŠ¡æ§åˆ¶" class="header-anchor">#</a> äº‹åŠ¡æ§åˆ¶</h2> <ul><li>åœ¨ jdbc ä¸­ Connection å¯¹è±¡æä¾›äº†æ”¹å˜äº‹åŠ¡æäº¤æ–¹å¼çš„ API æ–¹æ³•ï¼šsetAutoCommit(boolean)ã€‚mybatis æ¡†æ¶æ˜¯å¯¹ jdbc çš„å°è£…ï¼Œäº‹åŠ¡æ§åˆ¶æ–¹å¼åº•å±‚ä¹Ÿæ˜¯é€šè¿‡ setAutoCommit(boolean) è¿›è¡Œã€‚</li></ul> <p><strong>mybatis ä¸­äº‹åŠ¡æäº¤æ–¹å¼</strong></p> <ul><li>æ‰‹åŠ¨æäº¤æ–¹å¼ï¼š
<ul><li>åœ¨æµ‹è¯•ç±»çš„å¢åˆ æ”¹æ–¹æ³•ä¸­ï¼Œæ“ä½œç©æ•°æ®åº“ï¼Œæ·»åŠ ä»£ç ï¼š<code>sqlSession.commit();</code>è¿›è¡Œæäº¤ã€‚</li> <li>é€šè¿‡å¯¹æ‰‹åŠ¨æäº¤æ–¹å¼åˆ†æï¼Œmybatis æ¡†æ¶åœ¨åˆ›å»ºè¿æ¥å¯¹è±¡çš„æ—¶å€™ï¼Œé»˜è®¤è°ƒç”¨äº† setAutoCommit(false)ï¼Œå³ä¸æäº¤äº‹åŠ¡ã€‚åœ¨ç¼–å†™ä»£ç å®ç°å¢åˆ æ”¹æ“ä½œä¸­è¦æ±‚äº‹åŠ¡ï¼Œéœ€è¦é€šè¿‡ sqlSession.commit() è¿›è¡Œæ‰‹åŠ¨æäº¤äº‹åŠ¡ã€‚è¿™ç§æ–¹å¼ä¹Ÿæ˜¯åœ¨å®é™…é¡¹ç›®ä¸­åº”ç”¨è¾ƒå¤šçš„æ–¹å¼ï¼Œæ¨èä½¿ç”¨ã€‚</li></ul></li> <li>è‡ªåŠ¨æäº¤æ–¹å¼ï¼š
<ul><li>åœ¨æµ‹è¯•ç±»çš„å¢åˆ æ”¹æ–¹æ³•ä¸­ï¼Œåœ¨æ“ä½œæ•°æ®åº“ä¹‹å‰ï¼Œåœ¨è·å– sqlSeesionå¯¹è±¡æ—¶åŠ ä¸€ä¸ªå‚æ•° turnï¼š</li> <li>SqlSession sqlSession = sqlSessionFactory.openSession(<strong>true</strong>)ã€‚</li> <li>å¦‚æœæˆ‘ä»¬çš„æ“ä½œæ¯”è¾ƒç®€å•ï¼Œéƒ½æ˜¯å•ä¸€çš„æ“ä½œï¼Œå¯ä»¥ä½¿ç”¨è‡ªåŠ¨æäº¤çš„æ–¹å¼ã€‚</li></ul></li></ul> <h2 id="è¿æ¥æ± "><a href="#è¿æ¥æ± " class="header-anchor">#</a> è¿æ¥æ± </h2> <p><strong>mybatis å†…éƒ¨æä¾›äº†è¿æ¥æ± ã€‚åœ¨ sqlMapConfig.xml ä¸­é…ç½®æ•°æ®æºï¼š</strong></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--åŠ è½½databaseæ•°æ®åº“èµ„æºæ–‡ä»¶--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>database.properties<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
...
<span class="token comment">&lt;!--é…ç½®æ•°æ®åº“çš„è¿æ¥ä¿¡æ¯--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>POOLED<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>  
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${database.driver}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>   
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${database.url}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>   
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${database.username}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>  
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${database.password}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li>è¿™é‡Œ dataSource é‡Œçš„ type å±æ€§æœ‰ä¸‰ç±»ï¼š
<ul><li>jndiï¼šä½¿ç”¨ jndi å®ç°æ•°æ®æºã€‚</li> <li>pooledï¼šä½¿ç”¨è¿æ¥æ± çš„æ•°æ®æºã€‚</li> <li>unpooledï¼šä¸ä½¿ç”¨è¿æ¥æ± çš„æ•°æ®æºã€‚</li></ul></li> <li>ä¸‰ç±»æ•°æ®æºä¸­æˆ‘ä»¬é€šå¸¸ä½¿ç”¨çš„æ˜¯ pooledã€‚mybatis æ¡†æ¶æä¾›äº†å®ç° javax.sql.DataSource æ¥å£çš„å®ç°ç±»ï¼šPooledDataSourceã€UnpooledDataSource æ¥è¡¨ç¤º pooled å’Œ unpooled ç±»å‹çš„æ•°æ®æºã€‚</li></ul> <blockquote><p>æ³¨æ„ï¼š</p> <ul><li>ä½¿ç”¨ pooledï¼š
<ul><li>æ‰§è¡Œå®Œæ•°æ®åº“æ“ä½œï¼Œå½“æ‰§è¡Œ sqlSession.close() æ—¶ï¼ŒæŠŠæ•°æ®åº“è¿æ¥å¯¹è±¡è¿˜å›è¿æ¥æ±  poolã€‚</li> <li>å¤šæ¬¡æ‰§è¡Œæ•°æ®åº“æ“ä½œï¼Œå¯ä»¥å¤ç”¨æ•°æ®åº“è¿æ¥å¯¹è±¡ã€‚</li></ul></li> <li>ä½¿ç”¨ unpooledï¼š
<ul><li>æ‰§è¡Œå®Œæ•°æ®åº“æ“ä½œï¼Œå½“æ‰§è¡Œ sqlSession.close() æ—¶ï¼ŒæŠŠæ•°æ®åº“è¿æ¥å¯¹è±¡å…³é—­ã€‚</li> <li>æ¯ä¸€æ¬¡æ‰§è¡Œéƒ½æ˜¯åˆ›å»ºæ–°çš„æ•°æ®åº“è¿æ¥å¯¹è±¡ã€‚</li></ul></li> <li>ä½¿ç”¨ jndiï¼š
<ul><li>å¯¹ä¸èµ·ï¼Œæ²¡ç”¨è¿‡ï¼Œä¸çŸ¥é“ã€‚ã€‚ã€‚</li></ul></li></ul></blockquote> <h2 id="å»¶è¿ŸåŠ è½½"><a href="#å»¶è¿ŸåŠ è½½" class="header-anchor">#</a> å»¶è¿ŸåŠ è½½</h2> <p><strong>å»¶è¿ŸåŠ è½½ä»‹ç»</strong></p> <p>å»¶è¿ŸåŠ è½½ä¹Ÿå«æ‡’åŠ è½½ã€‚æŒ‡çš„æ˜¯æŒ‰éœ€åŠ è½½ï¼Œåœ¨å®é™…ç”¨åˆ°æ•°æ®çš„æ—¶å€™æ‰åŠ è½½ï¼Œä¸éœ€è¦ç”¨åˆ°æ•°æ®çš„æ—¶å€™ä¸åŠ è½½ã€‚å»¶è¿ŸåŠ è½½çš„ç‰¹ç‚¹å…ˆä»å•è¡¨æŸ¥è¯¢ï¼Œéœ€è¦æ—¶å†ä»å…³è”è¡¨æŸ¥è¯¢æ•°æ®ã€‚å› ä¸ºéƒ½æ˜¯å•è¡¨çš„æ“ä½œï¼Œå¯¹äºæå‡æ•°æ®åº“æ€§èƒ½æœ‰ä¸€å®šçš„å¸®åŠ©ã€‚</p> <p><strong>ä½¿ç”¨åœºæ™¯</strong></p> <p>ä½¿ç”¨å»¶è¿ŸåŠ è½½ï¼Œéƒ½æ˜¯åœ¨å¤šè¡¨å…³è”æŸ¥è¯¢çš„åœºæ™¯ã€‚mybatis æ¡†æ¶æä¾›çš„ä¸€å¯¹ä¸€å…³è”æŸ¥è¯¢é…ç½®ï¼ˆassociationï¼‰æ ‡ç­¾ï¼Œä¸€å¯¹å¤šå…³è”æŸ¥è¯¢é…ç½®ï¼ˆcollectionï¼‰æ ‡ç­¾ï¼Œæ”¯æŒå»¶è¿ŸåŠ è½½ï¼ˆéœ€è¦é…ç½®æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼‰ã€‚</p> <h3 id="association"><a href="#association" class="header-anchor">#</a> association</h3> <ul><li><p>ç¤ºä¾‹ï¼š</p> <ul><li><p>dao å±‚æ¥å£ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>æ³¨æ„ï¼ï¼ï¼ï¼ï¼ï¼è¿™ä¸ªæ–¹æ³•æ˜¯ <span class="token class-name">UserDao</span><span class="token punctuation">.</span>java çš„ï¼ï¼ï¼ï¼
				<span class="token operator">|</span>
				<span class="token operator">|</span>
				â†“
<span class="token comment">/**
 * æ ¹æ®ç”¨æˆ·è¡¨ä¸»é”®idå­—æ®µæŸ¥è¯¢ç”¨æˆ·æ•°æ®
 * @param id ä¼ å…¥æ–¹æ³•çš„ä¸»é”®å­—æ®µ
 * @return Userç±»å‹ï¼Œè¿”å›æŸ¥è¯¢ç»“æœï¼šç”¨æˆ·å¯¹è±¡
 */</span>
<span class="token class-name">User</span> <span class="token function">findUserListById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
æ³¨æ„ï¼ï¼ï¼ï¼ï¼ï¼è¿™ä¸ªæ–¹æ³•æ˜¯ <span class="token class-name">OrdersDao</span><span class="token punctuation">.</span>java çš„ï¼ï¼ï¼ï¼
				<span class="token operator">|</span>
				<span class="token operator">|</span>
				â†“
<span class="token comment">/**
 * æŸ¥è¯¢å…¨éƒ¨è®¢å•æ•°æ®ï¼Œå¹¶ä¸”å…³è”æŸ¥è¯¢è®¢å•æ‰€å±çš„ç”¨æˆ·æ•°æ®ï¼ˆå»¶è¿ŸåŠ è½½ï¼‰ã€‚
 * @return è¿”å›è®¢å•æ‰€å±çš„ç”¨æˆ·æ•°æ®åˆ—è¡¨
 */</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Orders</span><span class="token punctuation">&gt;</span></span> <span class="token function">findOrdersListAndUserByLazyLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div></li> <li><p>mapper æ˜ å°„æ–‡ä»¶ï¼š</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>æ³¨æ„ï¼ï¼ï¼ï¼ï¼ï¼è¿™ä¸ªæ˜ å°„æ–‡ä»¶æ˜¯ UserDao.xml çš„ï¼ï¼ï¼ï¼
				|
				|
				â†“
<span class="token comment">&lt;!--æ ¹æ®ç”¨æˆ·è¡¨ä¸»é”®idå­—æ®µæŸ¥è¯¢ç”¨æˆ·æ•°æ®--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findUserListById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>int<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select * from user where id = #{id};
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
--------------------------------------------------------------------------------
æ³¨æ„ï¼ï¼ï¼ï¼ï¼ï¼è¿™ä¸ªæ˜ å°„æ–‡ä»¶æ˜¯ OrdersDao.xml çš„ï¼ï¼ï¼ï¼
				|
				|
				â†“
<span class="token comment">&lt;!--æŸ¥è¯¢å…¨éƒ¨è®¢å•æ•°æ®ï¼Œå¹¶ä¸”å…³è”æŸ¥è¯¢è®¢å•æ‰€å±çš„ç”¨æˆ·æ•°æ®ï¼ˆå»¶è¿ŸåŠ è½½ï¼‰ã€‚--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findOrdersListAndUserByLazyLoadResultMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>orders<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user_id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userId<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>number<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>number<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>createtime<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>createtime<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>note<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>note<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>association</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span>
                 <span class="token attr-name">select</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.yang.dao.UserDao.findUserListById<span class="token punctuation">&quot;</span></span>
                 <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user_id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findOrdersListAndUserByLazyLoad<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findOrdersListAndUserByLazyLoadResultMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    SELECT o.* FROM orders o
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div></li></ul></li> <li><p>åœ¨ä¸Šè¿° resultMap çš„ association ä¸­ï¼š</p> <ul><li>selectï¼šé…ç½®è¦è°ƒç”¨çš„æŸ¥è¯¢sqlè¯­å¥idï¼ˆåç§°ç©ºé—´+&quot;.&quot;+sqlè¯­å¥idï¼‰ã€‚</li> <li>columnï¼šé…ç½®è¦ä¼ é€’çš„å‚æ•°å­—æ®µã€‚</li></ul></li> <li><p>è¿™æ ·å†™ï¼Œåœ¨å®é™…è¿è¡Œæ—¶ï¼Œå¦‚æœæ²¡æœ‰å¡«å…¥ç”¨æˆ·ä¿¡æ¯ï¼Œå°†ä¸ä¼šè°ƒç”¨ association é‡Œçš„æŸ¥è¯¢è¯­å¥ï¼ŒèŠ‚çœæ€§èƒ½ã€‚</p></li></ul> <h3 id="collection"><a href="#collection" class="header-anchor">#</a> collection</h3> <ul><li><p>ç¤ºä¾‹ï¼š</p> <ul><li><p>dao å±‚æ¥å£ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>æ³¨æ„ï¼ï¼ï¼ï¼ï¼ï¼è¿™ä¸ªæ–¹æ³•æ˜¯ <span class="token class-name">OrdersDao</span><span class="token punctuation">.</span>java çš„ï¼ï¼ï¼ï¼
  <span class="token operator">|</span>
  <span class="token operator">|</span>
  â†“
  <span class="token comment">/** 
	 * æ ¹æ®idæŸ¥è¯¢è®¢å•è¡¨ã€‚ 
	 * @return è¿”å›è®¢å•æ‰€å±çš„ç”¨æˆ·æ•°æ®åˆ—è¡¨ 
	 */</span>
  <span class="token class-name">Orders</span> <span class="token function">findOrdersById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
æ³¨æ„ï¼ï¼ï¼ï¼ï¼ï¼è¿™ä¸ªæ–¹æ³•æ˜¯ <span class="token class-name">UserDao</span><span class="token punctuation">.</span>java çš„ï¼ï¼ï¼ï¼
  <span class="token operator">|</span>
  <span class="token operator">|</span>
  â†“
  <span class="token comment">/**
   * æŸ¥è¯¢å…¨éƒ¨ç”¨æˆ·æ•°æ®ï¼Œå¹¶ä¸”å…³è”æŸ¥è¯¢å‡ºç”¨æˆ·æ‰€æœ‰çš„è®¢å•æ•°æ®ã€‚ä½¿ç”¨å»¶è¿ŸåŠ è½½æ–¹å¼å®ç°ã€‚ 
   * @return List&lt;User&gt;ç±»å‹ï¼Œè¿”å›æŸ¥è¯¢ç»“æœé›†ï¼šç”¨æˆ·å¯¹è±¡å…³è”è®¢å•é›†åˆåˆ—è¡¨ 
   */</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">findUserAndOrdersByLazyLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></li> <li><p>mapper æ˜ å°„æ–‡ä»¶ï¼š</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>æ³¨æ„ï¼ï¼ï¼ï¼ï¼ï¼è¿™ä¸ªæ–¹æ³•æ˜¯ OrdersDao.xml çš„ï¼ï¼ï¼ï¼
	|
	|
	â†“
<span class="token comment">&lt;!--æ ¹æ®idæŸ¥è¯¢è®¢å•è¡¨ã€‚--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findOrdersById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>orders<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>int<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>  
  select <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">refid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ordersAllColumn<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> from `orders` o where id = #{id};
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
æ³¨æ„ï¼ï¼ï¼ï¼ï¼ï¼è¿™ä¸ªæ–¹æ³•æ˜¯ UserDao.xml çš„ï¼ï¼ï¼ï¼
	|
	|
	â†“
<span class="token comment">&lt;!--æŸ¥è¯¢å…¨éƒ¨ç”¨æˆ·æ•°æ®ï¼Œå¹¶ä¸”å…³è”æŸ¥è¯¢å‡ºç”¨æˆ·æ‰€æœ‰çš„è®¢å•æ•°æ®ã€‚ä½¿ç”¨å»¶è¿ŸåŠ è½½æ–¹å¼å®ç°ã€‚--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findUserAndOrdersByLazyLoadResultMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>   
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>   
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>  
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>birthday<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>birthday<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>  
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sex<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sex<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>  
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>address<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>address<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>  
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>collection</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ordersList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>List<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ofType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Orders<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">select</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.yang.dao.OrdersDao.findOrdersById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findUserAndOrdersByLazyLoad<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findUserAndOrdersByLazyLoadResultMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>   
  select <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">refid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userAllColumn<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> from `user` u;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div></li></ul></li> <li><p>åŸç†åŒ association ä¸€æ ·ï¼Œä¸å†èµ˜è¿°!</p></li></ul> <h3 id="æ ¸å¿ƒé…ç½®æ–‡ä»¶è®¾ç½®"><a href="#æ ¸å¿ƒé…ç½®æ–‡ä»¶è®¾ç½®" class="header-anchor">#</a> æ ¸å¿ƒé…ç½®æ–‡ä»¶è®¾ç½®</h3> <ul><li><p>æœ€åä¸€æ­¥ä¸è¦å¿˜è®°é…ç½®æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œåœ¨ mybatis å®˜æ–¹æ–‡æ¡£ï¼Œæ‰¾åˆ° settings é…ç½®</p></li> <li><p>lazyLoadingEnabledï¼šå¼€å¯å»¶è¿ŸåŠ è½½å¼€å…³ï¼Œé»˜è®¤æ˜¯ false æœªå¼€å¯ï¼Œéœ€è¦é…ç½®ä¸º trueã€‚</p></li> <li><p>aggressiveLazyLoadingï¼šå°†ç§¯æåŠ è½½æ”¹ä¸ºæ¶ˆæåŠ è½½ï¼Œé»˜è®¤æ˜¯ false æ¶ˆæåŠ è½½ï¼Œä¸éœ€è¦é…ç½®ã€‚</p></li> <li><p>åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­ï¼š</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--å…¨å±€å‚æ•°é…ç½®--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>settings</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--å¼€å¯å»¶è¿ŸåŠ è½½--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lazyLoadingEnabled<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token comment">&lt;!--åŠ è½½ç­–ç•¥ï¼šæ¶ˆæåŠ è½½ï¼ˆé»˜è®¤é…ç½®ä¸º falseï¼Œå¯ä»¥ä¸å†™ï¼‰--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>aggressiveLazyLoading<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>settings</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ul> <h2 id="mybatis-ç¼“å­˜"><a href="#mybatis-ç¼“å­˜" class="header-anchor">#</a> Mybatis ç¼“å­˜</h2> <ul><li>æ¯å½“æˆ‘ä»¬ä½¿ç”¨ MyBatis å¼€å¯ä¸€æ¬¡å’Œæ•°æ®åº“çš„ä¼šè¯ï¼ŒMyBatis ä¼šåˆ›å»ºå‡ºä¸€ä¸ª SqlSession å¯¹è±¡è¡¨ç¤ºä¸€æ¬¡æ•°æ®åº“ä¼šè¯ã€‚åœ¨å¯¹æ•°æ®åº“çš„ä¸€æ¬¡ä¼šè¯ä¸­ï¼Œæˆ‘ä»¬æœ‰å¯èƒ½ä¼šåå¤åœ°æ‰§è¡Œå®Œå…¨ç›¸åŒçš„æŸ¥è¯¢è¯­å¥ï¼Œå¦‚æœä¸é‡‡å–ä¸€äº›æªæ–½çš„è¯ï¼Œæ¯ä¸€æ¬¡æŸ¥è¯¢éƒ½ä¼šæŸ¥è¯¢ä¸€æ¬¡æ•°æ®åº“ï¼Œè€Œæˆ‘ä»¬åœ¨æçŸ­çš„æ—¶é—´å†…åšäº†å®Œå…¨ç›¸åŒçš„æŸ¥è¯¢ï¼Œé‚£ä¹ˆå®ƒä»¬çš„ç»“æœææœ‰å¯èƒ½å®Œå…¨ç›¸åŒï¼Œç”±äºæŸ¥è¯¢ä¸€æ¬¡æ•°æ®åº“çš„ä»£ä»·å¾ˆå¤§ï¼Œè¿™æœ‰å¯èƒ½é€ æˆå¾ˆå¤§çš„èµ„æºæµªè´¹ã€‚</li> <li>ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œå‡å°‘èµ„æºçš„æµªè´¹ï¼ŒMyBatis ä¼šåœ¨è¡¨ç¤ºä¼šè¯çš„ SqlSession å¯¹è±¡ä¸­å»ºç«‹ä¸€ä¸ªç®€å•çš„ç¼“å­˜ï¼Œå°†æ¯æ¬¡æŸ¥è¯¢åˆ°çš„ç»“æœç»“æœç¼“å­˜èµ·æ¥ï¼Œå½“ä¸‹æ¬¡æŸ¥è¯¢çš„æ—¶å€™ï¼Œå¦‚æœåˆ¤æ–­å…ˆå‰æœ‰ä¸ªå®Œå…¨ä¸€æ ·çš„æŸ¥è¯¢ï¼Œä¼šç›´æ¥ä»ç¼“å­˜ä¸­ç›´æ¥å°†ç»“æœå–å‡ºï¼Œè¿”å›ç»™ç”¨æˆ·ï¼Œä¸éœ€è¦å†è¿›è¡Œä¸€æ¬¡æ•°æ®åº“æŸ¥è¯¢äº†ã€‚</li></ul> <h3 id="ä¸€çº§ç¼“å­˜"><a href="#ä¸€çº§ç¼“å­˜" class="header-anchor">#</a> ä¸€çº§ç¼“å­˜</h3> <ul><li><p>ä¸€çº§ç¼“å­˜æ˜¯åŸºäº PerpetualCache(mybatisè‡ªå¸¦) çš„ HashMap&lt;k,v&gt; æœ¬åœ°ç¼“å­˜ï¼Œå¦‚æœ SqlSession è°ƒç”¨äº† close() æ–¹æ³•æˆ–è€… flush ä¹‹åï¼Œè¯¥ session çš„ cache å°±ä¼šè¢«æ¸…ç©ºï¼Œç”±æ­¤å¯è§ï¼š<strong>ä¸€çº§ç¼“å­˜æ˜¯ sqlSession èŒƒå›´çš„ç¼“å­˜ï¼Œåªèƒ½åœ¨åŒä¸€ä¸ª sqlSession å†…éƒ¨æœ‰æ•ˆã€‚å®ƒæœ¬èº«å·²ç»å­˜åœ¨ï¼Œä¸€çº§ç¼“å­˜å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</strong></p></li> <li><p>æµ‹è¯•ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
 * æµ‹è¯•ä¸€çº§ç¼“å­˜ 
 */</span>
<span class="token annotation punctuation">@Testpublic</span> <span class="token keyword">void</span> <span class="token class-name">OneCacheTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    
  <span class="token comment">// 1.è·å–SqlSessionFactory    </span>
  <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token class-name">SqlSessionFactoryUtil</span><span class="token punctuation">.</span><span class="token function">getSqlSessionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
  <span class="token comment">// 2.æ‰“å¼€SqlSession    </span>
  <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
  <span class="token comment">// 3.è·å–mapperä»£ç†å¯¹è±¡    </span>
  <span class="token class-name">UserMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
  <span class="token comment">// åˆ›å»ºç”¨æˆ·å¯¹è±¡    </span>
  <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
  user<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">&quot;%å°%&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
  user<span class="token punctuation">.</span><span class="token function">setSex</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
  <span class="token comment">// ç¬¬ä¸€æ¬¡æŸ¥è¯¢    </span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">findUserByNameAndSex</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>    
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>    
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;-----------------åä¸½ä¸½åˆ†å‰²çº¿--------------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
  <span class="token comment">// ç¬¬äºŒæ¬¡æŸ¥è¯¢    </span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> list1 <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">findUserByNameAndSex</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>    
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>list1<span class="token punctuation">)</span><span class="token punctuation">;</span>    
  <span class="token comment">// 4.é‡Šæ”¾èµ„æº    </span>
  sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div></li> <li><p>æ‰§è¡Œç»“æœè¯´æ˜ï¼šè™½ç„¶æ‰§è¡Œäº†ä¸¤æ¬¡æŸ¥è¯¢ï¼Œä½†æ˜¯åªæ‰§è¡Œäº†ä¸€æ¬¡æ•°æ®åº“æ“ä½œï¼ˆæ•´ä¸ªè¿‡ç¨‹åªæœ‰ä¸€æ¡ sql è¯­å¥ï¼‰ã€‚è¿™å°±æ˜¯ mybatis æä¾›çš„ä¸€çº§ç¼“å­˜åœ¨èµ·ä½œç”¨ã€‚å› ä¸ºä¸€çº§ç¼“å­˜çš„å­˜åœ¨ï¼Œç¬¬äºŒæ¬¡å‘èµ·åŒæ ·çš„æŸ¥è¯¢ï¼Œå¹¶æ²¡æœ‰å†å»æŸ¥è¯¢æ•°æ®åº“ï¼Œè€Œæ˜¯ç›´æ¥ä»ä¸€çº§ç¼“å­˜ä¸­å–æ•°æ®ã€‚</p></li> <li><p>è§£æï¼š</p> <ul><li>ç¬¬ä¸€æ¬¡æŸ¥è¯¢ id ä¸º 1 çš„ç”¨æˆ·ï¼Œå…ˆå»ç¼“å­˜ä¸­æŸ¥æ‰¾æ˜¯å¦æœ‰ id ä¸º 1 çš„ç”¨æˆ·æ•°æ®ã€‚å¦‚æœæ²¡æœ‰ï¼Œä»æ•°æ®åº“ä¸­æŸ¥è¯¢ç”¨æˆ·æ•°æ®ï¼Œå¹¶å°†æ•°æ®å­˜å‚¨åˆ°ä¸€çº§ç¼“å­˜ä¸­ã€‚</li> <li>ç¬¬äºŒæ¬¡æŸ¥è¯¢ id ä¸ºä¸€çš„ç”¨æˆ·ï¼Œå…ˆå»ç¼“å­˜ä¸­æŸ¥æ‰¾æ˜¯å¦æœ‰ id ä¸º 1 çš„ç”¨æˆ·æ•°æ®ã€‚æ­¤æ—¶ç¼“å­˜ä¸­æœ‰ï¼Œç›´æ¥ä»ç¼“å­˜ä¸­å–å‡ºç”¨æˆ·æ•°æ®ã€‚</li> <li>å¦‚æœ sqlSession æ‰§è¡Œæ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤ã€æäº¤ã€å…³é—­ç­‰æ“ä½œï¼Œæ¸…ç©º sqlSession ä¸­çš„ä¸€çº§ç¼“å­˜æ•°æ®ã€‚æ¸…ç©ºçš„ç›®çš„æ˜¯ä¸ºäº†è®©ç¼“å­˜ä¸­å­˜æ”¾æœ€æ–°æ•°æ®ï¼Œé¿å…è„è¯»ã€‚</li> <li>å¦‚æœåœ¨æ‰§è¡Œç¬¬äºŒæ¬¡æŸ¥è¯¢ä¹‹å‰åŠ ä¸Šï¼š<code>sqlSession.commit();</code>ï¼Œé‚£ä¹ˆä¸€çº§ç¼“å­˜ä¼šæ¸…ç©ºã€‚</li></ul></li></ul> <h3 id="äºŒçº§ç¼“å­˜"><a href="#äºŒçº§ç¼“å­˜" class="header-anchor">#</a> äºŒçº§ç¼“å­˜</h3> <ul><li><p>äºŒçº§ç¼“å­˜æ˜¯ global cachingï¼Œè¶…å‡ºäº† session çš„èŒƒå›´ï¼Œå¯ä»¥è¢«æ‰€æœ‰ SqlSession å…±äº«ã€‚</p></li> <li><p>æ‰“å¼€ mybatis å®˜æ–¹æ–‡æ¡£ï¼Œæ‰¾åˆ° settings é…ç½®ï¼š</p></li> <li><p>è®¾ç½®å¦‚ä¸‹ï¼š</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--å…¨å±€å‚æ•°é…ç½®--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>settings</span><span class="token punctuation">&gt;</span></span>    
  <span class="token comment">&lt;!--å¼€å¯å»¶è¿ŸåŠ è½½--&gt;</span>    
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lazyLoadingEnabled<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>    
  <span class="token comment">&lt;!--åŠ è½½ç­–ç•¥ï¼šæ¶ˆæåŠ è½½--&gt;</span>    
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>aggressiveLazyLoading<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>    
  <span class="token comment">&lt;!--é…ç½®å¼€å¯äºŒçº§ç¼“å­˜--&gt;</span>    
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cacheEnabled<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>settings</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li> <li><p>åœ¨ mapper.xml æ–‡ä»¶ä¸­è®¾ç½®ï¼š</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cache</span> <span class="token attr-name">eviction</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>FIFO<span class="token punctuation">&quot;</span></span> <span class="token attr-name">flushInterval</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>60000<span class="token punctuation">&quot;</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>512<span class="token punctuation">&quot;</span></span> <span class="token attr-name">readOnly</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>è¿™ä¸ªæ›´é«˜çº§çš„é…ç½®åˆ›å»ºäº†ä¸€ä¸ª FIFO ç¼“å­˜ï¼Œå¹¶æ¯éš” 60 ç§’åˆ·æ–°ï¼Œå­˜æ•°ç»“æœå¯¹è±¡æˆ–åˆ—è¡¨çš„ 512 ä¸ªå¼•ç”¨ï¼Œè€Œä¸”è¿”å›çš„å¯¹è±¡è¢«è®¤ä¸ºæ˜¯åªè¯»çš„ï¼Œå› æ­¤åœ¨ä¸åŒçº¿ç¨‹ä¸­çš„è°ƒç”¨è€…ä¹‹é—´ä¿®æ”¹å®ƒä»¬ä¼šå¯¼è‡´å†²çªã€‚ï¼ˆæ­¤è¯ä¸ºå®˜æ–¹è§£è¯»ï¼ŒæŒ‰éƒ¨å°±ç­ã€‚ã€‚ã€‚ï¼‰</li></ul></li> <li><p>ä½†æ˜¯æˆ‘ä¸€èˆ¬å°±ç®€å•è®¾ç½®ï¼Œä¸å†™å±æ€§å‚æ•°ï¼š</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cache</span><span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>è¿˜æœ‰ä¸€ç§åšæ³•ï¼Œåœ¨æŸä¸ªæŸ¥è¯¢æ ‡ç­¾ï¼Œå•ç‹¬è®¾ç½®ã€‚</p> <ul><li>åœ¨ select æ ‡ç­¾ä¸­æœ‰ä¸€ä¸ª useCache å±æ€§ï¼Œä¸¤ä¸ªå€¼ï¼štrue/falseï¼Œé—­ç€çœ¼éƒ½çŸ¥é“ä»€ä¹ˆæ„æ€ã€‚</li> <li>ä¸€èˆ¬ç”¨äºï¼šåœ¨æ˜ å°„æ–‡ä»¶é…ç½®äº†å…¨å±€<code>&lt;cache/&gt;</code>çš„æ—¶å€™ï¼Œæœ‰ä¸ªåˆ«æ–¹æ³•ä¸æƒ³å¼€å¯ç¼“å­˜ï¼Œå¯ä»¥ä½¿ç”¨ useCache å±æ€§ä¸”è®¾ç½®ä¸º false å€¼ï¼Œå°±è¿‘åŸåˆ™ï¼Œæ­¤æ¡ select å°†ä¸ä¼šå¼€å¯äºŒçº§ç¼“å­˜ã€‚</li></ul></li></ul> <p><strong>è¯´äº†åŠå¤©ï¼Œæµ‹è¯•ä¸€æ³¢ï¼š</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
 * æµ‹è¯•äºŒçº§ç¼“å­˜
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token class-name">TwoCacheTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// 1.è·å–SqlSessionFactory</span>
    <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token class-name">SqlSessionFactoryUtil</span><span class="token punctuation">.</span><span class="token function">getSqlSessionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 2.æ‰“å¼€SqlSession1</span>
    <span class="token class-name">SqlSession</span> sqlSession1 <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 3.è·å–mapperä»£ç†å¯¹è±¡</span>
    <span class="token class-name">UserMapper</span> mapper1 <span class="token operator">=</span> sqlSession1<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// åˆ›å»ºç”¨æˆ·å¯¹è±¡</span>
    <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    user<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">&quot;%å°%&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    user<span class="token punctuation">.</span><span class="token function">setSex</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> list1 <span class="token operator">=</span> mapper1<span class="token punctuation">.</span><span class="token function">findUserByNameAndSex</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>list1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 4.é‡Šæ”¾èµ„æº</span>
    sqlSession1<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;-----------------åä¸½ä¸½åˆ†å‰²çº¿--------------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 5.æ‰“å¼€SqlSession2</span>
    <span class="token class-name">SqlSession</span> sqlSession2 <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//---------æ³¨æ„å’Œä¸€çº§ç¼“å­˜æµ‹è¯•çš„åŒºåˆ«ï¼Œè¿™é‡Œé‡æ–°åˆ›å»ºsqlSession</span>
    <span class="token comment">// 6.è·å–mapperä»£ç†å¯¹è±¡</span>
    <span class="token class-name">UserMapper</span> mapper2 <span class="token operator">=</span> sqlSession2<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// åˆ›å»ºç”¨æˆ·å¯¹è±¡</span>
    <span class="token class-name">User</span> user2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    user2<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">&quot;%å°%&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    user2<span class="token punctuation">.</span><span class="token function">setSex</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> list2 <span class="token operator">=</span> mapper2<span class="token punctuation">.</span><span class="token function">findUserByNameAndSex</span><span class="token punctuation">(</span>user2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>list2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 7.é‡Šæ”¾èµ„æº</span>
    sqlSession2<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><ul><li><p>è§£æ</p> <ul><li>sqlSession1 æŸ¥è¯¢ï¼Œä»äºŒçº§ç¼“å­˜ä¸­å–æ•°æ®ï¼Œç¼“å­˜å‘½ä¸­ç‡ä¸º 0ï¼Œå³ç¼“å­˜ä¸­æ²¡æœ‰æ•°æ®ã€‚</li> <li>å‘èµ· sql è¯­å¥æ‰§è¡Œæ•°æ®åº“æ“ä½œï¼Œå–å‡ºæ•°æ®ï¼Œå¹¶æŠŠæ•°æ®å­˜æ”¾åˆ°äºŒçº§ç¼“å­˜ã€‚</li> <li>sqlSession2 æŸ¥è¯¢ï¼Œä»äºŒçº§ç¼“å­˜ä¸­å–æ•°æ®ï¼Œç¼“å­˜å‘½ä¸­ç‡ä¸º 0.5ï¼Œç¼“å­˜ä¸­æœ‰æ•°æ®ï¼Œç›´æ¥å–å‡ºã€‚</li></ul></li> <li><p>è§£æ</p> <ul><li>sqlSession1 æ‰§è¡Œ UserMapper ä¸­çš„æŸ¥è¯¢æ–¹æ³•ï¼Œå°†æ•°æ®å†™å…¥ UserMapper çš„äºŒçº§ç¼“å­˜ä¸­ã€‚</li> <li>sqlSession2 æ‰§è¡Œ UserMapper ä¸­çš„æŸ¥è¯¢æ–¹æ³•ï¼Œä»äºŒçº§ç¼“å­˜ä¸­å–å‡ºæ•°æ®ã€‚</li> <li>sqlSession3 æ‰§è¡Œ UserMapper ä¸­çš„å¢åˆ æ”¹ã€æäº¤æ–¹æ³•ï¼Œæ¸…ç©º UserMapper äºŒçº§ç¼“å­˜ã€‚</li></ul></li></ul> <h2 id="mybatis-æ³¨è§£å¼€å‘"><a href="#mybatis-æ³¨è§£å¼€å‘" class="header-anchor">#</a> Mybatis æ³¨è§£å¼€å‘</h2> <ul><li>æ³¨è§£ä¸€é¡¹ Java çš„é«˜çº§æŠ€æœ¯ï¼Œä½¿ç”¨æ¡†æ¶ç»“åˆæ³¨è§£å¼€å‘æ˜¯ä¸€ç§ä¾¿æ·é«˜æ•ˆä¸”ä¼˜é›…çš„äº‹æƒ…ï¼Œä½†æ˜¯çº¯æ³¨è§£å¼€å‘ï¼Œé‚£å°±ç›¸å½“çš„æ²™é›•äº†ï¼Œé‚£å°±äº†è§£ä¸€ä¸‹è¿™ä¸ªæ²™é›•å§ã€‚</li> <li>å› ä¸ºä¸éœ€è¦åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹é…ç½®é¡¹ï¼Œæ‰€ä»¥é€šè¿‡ä¸ä¹‹å‰çš„å¯¹æ¯”å¯çœ‹å‡ºå„ä¸ªæ–¹å¼çš„ä¼˜ç¼ºç‚¹ã€‚</li></ul> <h3 id="å¢-insert"><a href="#å¢-insert" class="header-anchor">#</a> å¢ï¼š@Insert</h3> <p><strong>XML é…ç½®æ–¹å¼ï¼š</strong></p> <ul><li><p>dao å±‚æ¥å£ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
 * æ·»åŠ ç”¨æˆ·
 * @param user ç”¨æˆ·å¯¹è±¡
 * @return Integerç±»å‹ï¼Œè¿”å›æ•°æ®åº“ç”¨æˆ·è¡¨å½±å“çš„è¡Œæ•°
 */</span>
<span class="token class-name">Integer</span> <span class="token function">addUser</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p>mapper æ˜ å°„æ–‡ä»¶ï¼š</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--æ·»åŠ ç”¨æˆ·--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>addUser<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    insert into `user`
    values (#{id},#{username},#{birthday},#{sex},#{address});
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul> <p><strong>æ³¨è§£æ–¹å¼ï¼š</strong></p> <ul><li><p>dao å±‚æ¥å£ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
 * é€šè¿‡æ³¨è§£æ–°å¢ä¸€ä¸ªç”¨æˆ·
 * @param user æ–°å¢çš„ç”¨æˆ·å¯¹è±¡
 */</span>
<span class="token annotation punctuation">@Insert</span><span class="token punctuation">(</span><span class="token string">&quot;insert into `user` (username,birthday,sex,address)&quot;</span> <span class="token operator">+</span>
        <span class="token string">&quot; values(#{username},#{birthday},#{sex},#{address});&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">void</span> <span class="token function">addUserByAnnotation</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ul> <h3 id="åˆ -delete"><a href="#åˆ -delete" class="header-anchor">#</a> åˆ ï¼š@Delete</h3> <p><strong>XML é…ç½®æ–¹å¼ï¼š</strong></p> <ul><li><p>dao å±‚æ¥å£ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/** 
 * æ·»åŠ ç”¨æˆ· 
 * @param user ç”¨æˆ·å¯¹è±¡ 
 * @return Integerç±»å‹ï¼Œè¿”å›æ•°æ®åº“ç”¨æˆ·è¡¨å½±å“çš„è¡Œæ•° 
 */</span>
<span class="token class-name">Integer</span> <span class="token function">addUser</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p>mapper æ˜ å°„æ–‡ä»¶ï¼š</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--æ·»åŠ ç”¨æˆ·--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>addUser<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>    
  insert into `user`    
  values (#{id},#{username},#{birthday},#{sex},#{address});
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul> <p><strong>æ³¨è§£æ–¹å¼ï¼š</strong></p> <ul><li><p>dao å±‚æ¥å£ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
 * é€šè¿‡æ³¨è§£æ–°å¢ä¸€ä¸ªç”¨æˆ·
 * @param user æ–°å¢çš„ç”¨æˆ·å¯¹è±¡
 */</span>
<span class="token annotation punctuation">@Insert</span><span class="token punctuation">(</span><span class="token string">&quot;insert into `user` (username,birthday,sex,address)&quot;</span> <span class="token operator">+</span>
        <span class="token string">&quot; values(#{username},#{birthday},#{sex},#{address});&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">void</span> <span class="token function">addUserByAnnotation</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ul> <h3 id="æ”¹-update"><a href="#æ”¹-update" class="header-anchor">#</a> æ”¹ï¼š@Update</h3> <p><strong>XML é…ç½®æ–¹å¼ï¼š</strong></p> <ul><li><p>dao å±‚æ¥å£ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
 * æ ¹æ®ç”¨æˆ·idä¿®æ”¹ç”¨æˆ·
 * @param user ç”¨æˆ·å¯¹è±¡
 * @return Integerç±»å‹ï¼Œè¿”å›æ•°æ®åº“ç”¨æˆ·è¡¨å½±å“çš„è¡Œæ•°
 */</span>
<span class="token class-name">Integer</span> <span class="token function">updateUser</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p>mapper æ˜ å°„æ–‡ä»¶ï¼š</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--æ ¹æ®ç”¨æˆ·idä¿®æ”¹ç”¨æˆ·--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updateUser<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    update `user` set sex = #{sex} where id = #{id};
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul> <p><strong>æ³¨è§£æ–¹å¼ï¼š</strong></p> <ul><li><p>dao å±‚æ¥å£ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
 * é€šè¿‡æ³¨è§£æ ¹æ®ç”¨æˆ·Idä¿®æ”¹ç”¨æˆ·
 * @param user ç”¨æˆ·å¯¹è±¡
 */</span>
<span class="token annotation punctuation">@Update</span><span class="token punctuation">(</span><span class="token string">&quot;update user set username = #{username} where id = #{id};&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">void</span> <span class="token function">updateUserByIdAndAnnotation</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul> <h3 id="æŸ¥-select"><a href="#æŸ¥-select" class="header-anchor">#</a> æŸ¥ï¼š@Select</h3> <p><strong>XML é…ç½®æ–¹å¼ï¼š</strong></p> <ul><li><p>dao å±‚æ¥å£ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/** * æŸ¥è¯¢ç”¨æˆ·æ•°æ®åˆ—è¡¨ * @return List&lt;User&gt;ç±»å‹ï¼Œè¿”å›æŸ¥è¯¢ç»“æœé›†ï¼šç”¨æˆ·å¯¹è±¡ç»“åˆåˆ—è¡¨ */</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">findUserList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>mapper æ˜ å°„æ–‡ä»¶ï¼š</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--æŸ¥è¯¢ç”¨æˆ·æ•°æ®åˆ—è¡¨--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findUserList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>    select * from user;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <p><strong>æ³¨è§£æ–¹å¼ï¼š</strong></p> <ul><li><p>dao å±‚æ¥å£ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
 * é€šè¿‡æ³¨è§£æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯
 * @return  è¿”å›ç”¨æˆ·ä¿¡æ¯
 */</span>
<span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select * from user;&quot;</span><span class="token punctuation">)</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">findUserListByAnnotation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul> <h3 id="ç»´æŠ¤ä¸»é”®å€¼-selectkey"><a href="#ç»´æŠ¤ä¸»é”®å€¼-selectkey" class="header-anchor">#</a> ç»´æŠ¤ä¸»é”®å€¼ï¼š@SelectKey</h3> <p><strong>XML é…ç½®æ–¹å¼ï¼š</strong></p> <ul><li><p>dao å±‚æ¥å£ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
 * æ·»åŠ ç”¨æˆ·
 * @param user ç”¨æˆ·å¯¹è±¡
 * @return Integerç±»å‹ï¼Œè¿”å›æ•°æ®åº“ç”¨æˆ·è¡¨å½±å“çš„è¡Œæ•°
 */</span>
<span class="token class-name">Integer</span> <span class="token function">addUser</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p>mapper æ˜ å°„æ–‡ä»¶ï¼š</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>addUser<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>selectKey</span> <span class="token attr-name">keyColumn</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">keyProperty</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>int<span class="token punctuation">&quot;</span></span> <span class="token attr-name">order</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>AFTER<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    	select LAST_INSERT_ID()
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>selectKey</span><span class="token punctuation">&gt;</span></span>
    insert into `user`(username,birthday,sex,address)
    values(#{username},#{birthday},#{sex},#{address})
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ul> <p><strong>æ³¨è§£æ–¹å¼ï¼š</strong></p> <ul><li><p>dao å±‚æ¥å£ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
 * æ·»åŠ ç”¨æˆ·ä¸”è·å–æ•°æ®åº“ç»´æŠ¤ä¸»é”®å€¼ï¼ˆ@SelectKeyï¼‰
 * @param user ç”¨æˆ·å¯¹è±¡
 */</span>
<span class="token annotation punctuation">@Insert</span><span class="token punctuation">(</span><span class="token string">&quot;insert into `user` (username,birthday,sex,address)&quot;</span> <span class="token operator">+</span>
        <span class="token string">&quot; values(#{username},#{birthday},#{sex},#{address});&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@SelectKey</span><span class="token punctuation">(</span>statement <span class="token operator">=</span><span class="token string">&quot;select LAST_INSERT_ID()&quot;</span><span class="token punctuation">,</span>keyColumn<span class="token operator">=</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span>
        keyProperty<span class="token operator">=</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span>resultType<span class="token operator">=</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>before<span class="token operator">=</span><span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token keyword">void</span> <span class="token function">addUserByAnnotationAndSelectKey</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li></ul> <h3 id="å°ç»“ä¸€æ³¢"><a href="#å°ç»“ä¸€æ³¢" class="header-anchor">#</a> å°ç»“ä¸€æ³¢</h3> <table><thead><tr><th>æ³¨è§£</th> <th>æè¿°</th> <th>å¯¹åº”xmlé…ç½®æ ‡ç­¾</th></tr></thead> <tbody><tr><td>@Insert</td> <td>é…ç½®æ–°å¢sqlè¯­å¥</td> <td><code>&lt;insert/&gt;</code></td></tr> <tr><td>@Select</td> <td>é…ç½®æŸ¥è¯¢sqlè¯­å¥</td> <td><code>&lt;select/&gt;</code></td></tr> <tr><td>@Update</td> <td>é…ç½®ä¿®æ”¹sqlè¯­å¥</td> <td><code>&lt;update/&gt;</code></td></tr> <tr><td>@Delete</td> <td>é…ç½®åˆ é™¤sqlè¯­å¥</td> <td><code>&lt;delete/&gt;</code></td></tr> <tr><td>@SelectKey</td> <td>æŸ¥è¯¢æ•°æ®åº“ç»´æŠ¤ä¸»é”®å€¼</td> <td><code>&lt;selectKey/&gt;</code></td></tr></tbody></table> <ul><li>ç”±ä¸Šå¯è§ï¼Œä½¿ç”¨æ³¨è§£å¼€å‘ï¼Œæ€»ä½“ä»£ç å¥½åƒç¡®å®æ¯” XML æ–¹å¼å¼€å‘å°‘äº†ä¸€ç‚¹ï¼›è‡³äºå¯è¯»æ€§çš„è¯ï¼Œå¦‚æœäº†è§£æ³¨è§£å¼€å‘ï¼Œå¥½åƒä¹Ÿèƒ½çœ‹æ˜ç™½æ˜¯æ€ä¹ˆä¸€å›äº‹ã€‚</li> <li>ä½†æ˜¯å¦‚æœæ–¹æ³•ä¸€å¤šèµ·æ¥ï¼Œä¸€ä¸ª dao å±‚æ¥å£æ–‡ä»¶æ»¡å±çš„æ³¨è§£ä¼šè®©äººçœ¼èŠ±ç¼­ä¹±æƒ³è½¬è¡Œï¼Œä¸ä¿¡çš„è¯çœ‹é«˜çº§æ˜ å°„ã€‚</li></ul> <h3 id="ä¸€å¯¹ä¸€"><a href="#ä¸€å¯¹ä¸€" class="header-anchor">#</a> ä¸€å¯¹ä¸€</h3> <p><strong>XML é…ç½®æ–¹å¼ï¼š</strong></p> <ul><li><p>dao å±‚æ¥å£ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/** 
 * æŸ¥è¯¢å…¨éƒ¨è®¢å•æ•°æ®ï¼Œå¹¶ä¸”å…³è”æŸ¥è¯¢è®¢å•æ‰€å±çš„ç”¨æˆ·æ•°æ®ã€‚ 
 * @return è¿”å›è®¢å•æ‰€å±çš„ç”¨æˆ·æ•°æ®åˆ—è¡¨ 
 */</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Orders</span><span class="token punctuation">&gt;</span></span> <span class="token function">findOrdersListAndUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>mapper æ˜ å°„æ–‡ä»¶ï¼š</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--æŸ¥è¯¢å…¨éƒ¨è®¢å•æ•°æ®ï¼Œå¹¶ä¸”å…³è”æŸ¥è¯¢è®¢å•æ‰€å±çš„ç”¨æˆ·æ•°æ®--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findOrdersListAndUserResultMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>orders<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>    
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>    
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user_id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userId<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>    
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>number<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>number<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>  
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>createtime<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>createtime<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>  
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>note<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>note<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>  
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>association</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>   
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>address<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>address<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>   
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>association</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findOrdersListAndUser<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findOrdersListAndUserResultMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>   
  SELECT o.*,u.username,u.address    
  FROM orders o	LEFT JOIN `user` u	
  ON o.user_id = u.id;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></li></ul> <p><strong>æ³¨è§£æ–¹å¼ï¼š</strong></p> <ul><li><p>dao å±‚æ¥å£ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/** 
 * æŸ¥è¯¢å…¨éƒ¨è®¢å•æ•°æ®ï¼Œå¹¶ä¸”å…³è”æŸ¥è¯¢å‡ºè®¢å•æ‰€å±çš„ç”¨æˆ·æ•°æ®ï¼ˆæ³¨è§£å®ç°ä¸€å¯¹ä¸€å…³è”æŸ¥è¯¢ï¼‰ 
 * @return è¿”å›è®¢å•æ‰€å±çš„ç”¨æˆ·æ•°æ®åˆ—è¡¨ 
 */</span>
<span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;SELECT o.*,u.username,u.address &quot;</span> <span class="token operator">+</span>      
        <span class="token string">&quot;FROM orders o &quot;</span> <span class="token operator">+</span>   
        <span class="token string">&quot;LEFT JOIN `user` u &quot;</span> <span class="token operator">+</span>   
        <span class="token string">&quot;ON o.user_id = u.id;&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Results</span><span class="token punctuation">(</span><span class="token punctuation">{</span>        
  <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>id <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span> property <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    
  <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>column <span class="token operator">=</span> <span class="token string">&quot;user_id&quot;</span><span class="token punctuation">,</span>property <span class="token operator">=</span> <span class="token string">&quot;userId&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>     
  <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>column <span class="token operator">=</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">,</span>property <span class="token operator">=</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>      
  <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>column <span class="token operator">=</span> <span class="token string">&quot;createtime&quot;</span><span class="token punctuation">,</span>property <span class="token operator">=</span> <span class="token string">&quot;createtime&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>       
  <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>column <span class="token operator">=</span> <span class="token string">&quot;note&quot;</span><span class="token punctuation">,</span>property <span class="token operator">=</span> <span class="token string">&quot;note&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    
  <span class="token comment">//Userå±æ€§        </span>
  <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>column <span class="token operator">=</span> <span class="token string">&quot;username&quot;</span><span class="token punctuation">,</span>property <span class="token operator">=</span> <span class="token string">&quot;user.username&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    
  <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>column <span class="token operator">=</span> <span class="token string">&quot;address&quot;</span><span class="token punctuation">,</span>property <span class="token operator">=</span> <span class="token string">&quot;user.address&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Orders</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAllOrderListAndUserByAnnotation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></li></ul> <blockquote><p>è§£é‡Šï¼š</p> <ol><li>@Results ç›¸å½“äº XML ä¸­çš„ <code>&lt;resultMap&gt;</code> æ ‡ç­¾ï¼Œ@Result ç›¸å½“äº XML ä¸­çš„ <code>&lt;resultMap&gt;</code> æ ‡ç­¾é‡Œçš„ <code>&lt;id/&gt;</code> å’Œ <code>&lt;result/&gt;</code> å­æ ‡ç­¾ã€‚</li> <li>åœ¨ @Result å±æ€§ä¸­ï¼š
<ul><li>idï¼šå¸ƒå°”ç±»å‹å€¼ï¼Œè®¾ç½®æ˜¯å¦æ˜¯ä¸»é”®å­—æ®µã€‚true æ˜¯ä¸»é”®å­—æ®µã€‚é»˜è®¤å€¼æ˜¯ falseã€‚</li> <li>columnï¼šå­—æ®µåç§°ã€‚</li> <li>propertyï¼šå±æ€§åç§°ã€‚</li></ul></li></ol></blockquote> <h3 id="ä¸€å¯¹ä¸€çš„å»¶è¿ŸåŠ è½½"><a href="#ä¸€å¯¹ä¸€çš„å»¶è¿ŸåŠ è½½" class="header-anchor">#</a> ä¸€å¯¹ä¸€çš„å»¶è¿ŸåŠ è½½</h3> <p><strong>XML é…ç½®æ–¹å¼ï¼š</strong></p> <ul><li><p>dao å±‚æ¥å£ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
 * æŸ¥è¯¢å…¨éƒ¨è®¢å•æ•°æ®ï¼Œå¹¶ä¸”å…³è”æŸ¥è¯¢è®¢å•æ‰€å±çš„ç”¨æˆ·æ•°æ®ï¼ˆå»¶è¿ŸåŠ è½½ï¼‰ã€‚
 * @return è¿”å›è®¢å•æ‰€å±çš„ç”¨æˆ·æ•°æ®åˆ—è¡¨
 */</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Orders</span><span class="token punctuation">&gt;</span></span> <span class="token function">findOrdersListAndUserByLazyLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>mapper æ˜ å°„æ–‡ä»¶ï¼š</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--æŸ¥è¯¢å…¨éƒ¨è®¢å•æ•°æ®ï¼Œå¹¶ä¸”å…³è”æŸ¥è¯¢è®¢å•æ‰€å±çš„ç”¨æˆ·æ•°æ®ï¼ˆå»¶è¿ŸåŠ è½½ï¼‰ã€‚--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findOrdersListAndUserByLazyLoadResultMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>orders<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user_id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userId<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>number<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>number<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>createtime<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>createtime<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>note<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>note<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>association</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span>
                 <span class="token attr-name">select</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.yang.mapper.UserMapper.findUserListById<span class="token punctuation">&quot;</span></span>
                 <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user_id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findOrdersListAndUserByLazyLoad<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findOrdersListAndUserByLazyLoadResultMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    SELECT o.* FROM orders o
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div></li></ul> <p><strong>æ³¨è§£æ–¹å¼ï¼š</strong></p> <ul><li><p>dao å±‚æ¥å£ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
 * æŸ¥è¯¢å…¨éƒ¨è®¢å•æ•°æ®ï¼Œå¹¶ä¸”å…³è”æŸ¥è¯¢å‡ºè®¢å•æ‰€å±çš„ç”¨æˆ·æ•°æ®ã€‚(æ³¨è§£å®ç°ä¸€å¯¹ä¸€å…³è”æŸ¥è¯¢ï¼Œé‡‡ç”¨å»¶è¿ŸåŠ è½½å®ç°ã€‚)
 * @return è¿”å›è®¢å•æ‰€å±çš„ç”¨æˆ·æ•°æ®åˆ—è¡¨
 */</span>
<span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;SELECT o.id,o.user_id,o.number,o.createtime,o.note FROM orders o&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Results</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>id <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span> property <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>column <span class="token operator">=</span> <span class="token string">&quot;user_id&quot;</span><span class="token punctuation">,</span>property <span class="token operator">=</span> <span class="token string">&quot;userId&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>column <span class="token operator">=</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">,</span>property <span class="token operator">=</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>column <span class="token operator">=</span> <span class="token string">&quot;createtime&quot;</span><span class="token punctuation">,</span>property <span class="token operator">=</span> <span class="token string">&quot;createtime&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>column <span class="token operator">=</span> <span class="token string">&quot;note&quot;</span><span class="token punctuation">,</span>property <span class="token operator">=</span> <span class="token string">&quot;note&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">//å»¶è¿ŸåŠ è½½userè¡¨</span>
        <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>column <span class="token operator">=</span> <span class="token string">&quot;user_id&quot;</span><span class="token punctuation">,</span>property <span class="token operator">=</span> <span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span>
                one <span class="token operator">=</span> <span class="token annotation punctuation">@One</span><span class="token punctuation">(</span>select <span class="token operator">=</span> <span class="token string">&quot;com.yang.mapper.UserMapper.findUserListById&quot;</span><span class="token punctuation">,</span>
                fetchType <span class="token operator">=</span> <span class="token class-name">FetchType</span><span class="token punctuation">.</span><span class="token constant">LAZY</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Orders</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAllOrderListAndUserByAnnotationAndLazyLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></li></ul> <blockquote><p>è§£é‡Šï¼š</p> <ol><li>@Results ç›¸å½“äº XML ä¸­çš„ <code>&lt;resultMap&gt;</code> æ ‡ç­¾ï¼Œ@Result ç›¸å½“äº XML ä¸­çš„ <code>&lt;resultMap&gt;</code> æ ‡ç­¾é‡Œçš„ <code>&lt;id/&gt;</code> å’Œ <code>&lt;result/&gt;</code> å­æ ‡ç­¾ã€‚</li> <li>åœ¨ @Result å±æ€§ä¸­ï¼š
<ul><li>idï¼šå¸ƒå°”ç±»å‹å€¼ï¼Œè®¾ç½®æ˜¯å¦æ˜¯ä¸»é”®å­—æ®µã€‚true æ˜¯ä¸»é”®å­—æ®µã€‚é»˜è®¤å€¼æ˜¯ falseã€‚</li> <li>columnï¼šå­—æ®µåç§°ã€‚</li> <li>propertyï¼šå±æ€§åç§°ã€‚</li> <li>oneï¼šé…ç½®ä¸€å¯¹ä¸€å…³è”æŸ¥è¯¢ï¼ˆå»¶è¿ŸåŠ è½½ï¼‰ã€‚</li></ul></li> <li>@Oneï¼šé…ç½®å»¶è¿ŸåŠ è½½ä¸€å¯¹ä¸€å…³è”æŸ¥è¯¢ã€‚
<ul><li>selectï¼šå…³è”æŸ¥è¯¢sqlè¯­å¥ï¼ˆæ¥å£å…¨é™å®šåç§°+&quot;.&quot;+æ¥å£æ–¹æ³•åç§°ï¼‰ã€‚</li> <li>fetchTypeï¼šé…ç½®å»¶è¿ŸåŠ è½½æ–¹å¼ã€‚</li></ul></li></ol></blockquote> <h3 id="ä¸€å¯¹å¤šåŠå»¶è¿ŸåŠ è½½"><a href="#ä¸€å¯¹å¤šåŠå»¶è¿ŸåŠ è½½" class="header-anchor">#</a> ä¸€å¯¹å¤šåŠå»¶è¿ŸåŠ è½½</h3> <ul><li>ç»“åˆå»¶è¿ŸåŠ è½½ä¸€èµ·åˆ†æï¼ŒXML æ–¹å¼ä¹Ÿæ‡’å¾—å†™äº†ï¼Œç›´æ¥çœ‹æ³¨è§£ç»“æœ</li></ul> <p><strong>æ³¨è§£æ–¹å¼ï¼š</strong></p> <ul><li><p>dao å±‚æ¥å£ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code> <span class="token comment">/**
  * æŸ¥è¯¢å…¨éƒ¨ç”¨æˆ·æ•°æ®ï¼Œå¹¶ä¸”å…³è”æŸ¥è¯¢å‡ºç”¨æˆ·çš„å…¨éƒ¨è®¢å•æ•°æ®ã€‚é‡‡ç”¨å»¶è¿ŸåŠ è½½å’Œæ³¨è§£æ–¹å¼å®ç°ã€‚
  * @return List&lt;User&gt;ç±»å‹ï¼Œè¿”å›æŸ¥è¯¢ç»“æœé›†ï¼šç”¨æˆ·å¯¹è±¡ç»“åˆåˆ—è¡¨
  */</span>
 <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select * from user;&quot;</span><span class="token punctuation">)</span>
 <span class="token annotation punctuation">@Results</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
         <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">,</span>column <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span>property <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
         <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>column <span class="token operator">=</span> <span class="token string">&quot;username&quot;</span><span class="token punctuation">,</span>property <span class="token operator">=</span> <span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
         <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>column <span class="token operator">=</span> <span class="token string">&quot;birthday&quot;</span><span class="token punctuation">,</span>property <span class="token operator">=</span> <span class="token string">&quot;birthday&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
         <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>column <span class="token operator">=</span> <span class="token string">&quot;sex&quot;</span><span class="token punctuation">,</span>property <span class="token operator">=</span> <span class="token string">&quot;sex&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
         <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>column <span class="token operator">=</span> <span class="token string">&quot;address&quot;</span><span class="token punctuation">,</span>property <span class="token operator">=</span> <span class="token string">&quot;address&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
         <span class="token comment">//å»¶è¿ŸåŠ è½½ordersè¡¨</span>
         <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>column <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span>property <span class="token operator">=</span> <span class="token string">&quot;ordersList&quot;</span><span class="token punctuation">,</span>many <span class="token operator">=</span> <span class="token annotation punctuation">@Many</span><span class="token punctuation">(</span>
                 select <span class="token operator">=</span> <span class="token string">&quot;com.yang.mapper.OrdersMapper.findOrdersById&quot;</span><span class="token punctuation">,</span>
                 fetchType <span class="token operator">=</span> <span class="token class-name">FetchType</span><span class="token punctuation">.</span><span class="token constant">LAZY</span><span class="token punctuation">)</span>
         <span class="token punctuation">)</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span>
 <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">findUserListAndOrdersByAnnotationAndLazyLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></li></ul> <blockquote><p>è§£é‡Šï¼š</p> <ol><li>@Results ç›¸å½“äº XML ä¸­çš„ <code>&lt;resultMap&gt;</code> æ ‡ç­¾ï¼Œ@Result ç›¸å½“äº XML ä¸­çš„ <code>&lt;resultMap&gt;</code> æ ‡ç­¾é‡Œçš„ <code>&lt;id/&gt;</code> å’Œ <code>&lt;result/&gt;</code> å­æ ‡ç­¾ã€‚</li> <li>åœ¨ @Result å±æ€§ä¸­ï¼š
<ul><li>idï¼šå¸ƒå°”ç±»å‹å€¼ï¼Œè®¾ç½®æ˜¯å¦æ˜¯ä¸»é”®å­—æ®µã€‚true æ˜¯ä¸»é”®å­—æ®µã€‚é»˜è®¤å€¼æ˜¯ falseã€‚</li> <li>columnï¼šå­—æ®µåç§°ã€‚</li> <li>propertyï¼šå±æ€§åç§°ã€‚</li> <li>oneï¼šé…ç½®ä¸€å¯¹ä¸€å…³è”æŸ¥è¯¢ï¼ˆå»¶è¿ŸåŠ è½½ï¼‰ã€‚</li> <li>manyï¼šé…ç½®ä¸€å¯¹å¤šå…³è”å…³ç³»ï¼Œç›¸å½“äºxmlé…ç½®ä¸­<code>&lt;collection/&gt;</code>æ ‡ç­¾</li></ul></li> <li>@Oneï¼šé…ç½®å»¶è¿ŸåŠ è½½ä¸€å¯¹ä¸€å…³è”æŸ¥è¯¢ã€‚
<ul><li>selectï¼šå…³è”æŸ¥è¯¢sqlè¯­å¥ï¼ˆæ¥å£å…¨é™å®šåç§°+&quot;.&quot;+æ¥å£æ–¹æ³•åç§°ï¼‰ã€‚</li> <li>fetchTypeï¼šé…ç½®å»¶è¿ŸåŠ è½½æ–¹å¼ã€‚</li></ul></li> <li>@Manyï¼šé…ç½®ä¸€å¯¹å¤šå…³è”æŸ¥è¯¢ã€‚
<ul><li>selectï¼šæŒ‡å®šå…³è”æŸ¥è¯¢sqlè¯­å¥ï¼ˆæ¥å£çš„å…¨é™å®šåç§°+&quot;.&quot;+æ¥å£æ–¹æ³•åç§°ï¼‰ã€‚</li> <li>fetchTypeï¼šé…ç½®å»¶è¿ŸåŠ è½½æ–¹å¼ã€‚</li></ul></li></ol></blockquote></div></div> <!----> <div class="page-edit"><!----> <div class="tags"><a href="/blog/tags/?tag=MyBatis" title="æ ‡ç­¾">#MyBatis</a></div> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">2022/09/30, 18:51:59</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><!----> <a href="/blog/pages/2180198A4D054652/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Mybatis-plusä»£ç ç”Ÿæˆå™¨</div></a></div> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/blog/pages/2180198A4D054652/">Mybatis-plusä»£ç ç”Ÿæˆå™¨</a>â†’
      </span></p></div></div></div> <!----></main></div> <div class="footer"><div class="icons"><a href="mailto:fitminf@163.com" title="å‘é‚®ä»¶" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/Fitminf" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=755597173" title="å¬éŸ³ä¹" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="æœ¬ç«™ä¸»é¢˜">Vdoing</a> 
    | Copyright Â© 2022-2024
    <span>Fitminf | <a href="https://gitee.com/fitminf" target="_blank">Fitminf License</a></span></div> <div class="buttons"><div title="è¿”å›é¡¶éƒ¨" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="å»è¯„è®º" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="ä¸»é¢˜æ¨¡å¼" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          è·Ÿéšç³»ç»Ÿ
        </li><li class="iconfont icon-rijianmoshi">
          æµ…è‰²æ¨¡å¼
        </li><li class="iconfont icon-yejianmoshi">
          æ·±è‰²æ¨¡å¼
        </li><li class="iconfont icon-yuedu">
          é˜…è¯»æ¨¡å¼
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.c1e4a00a.js" defer></script><script src="/blog/assets/js/2.5f0b0e2a.js" defer></script><script src="/blog/assets/js/14.96fb6837.js" defer></script>
  </body>
</html>
